<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Cambridge SMT System: alilats2splats.main.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cambridge SMT System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('alilats2splats_8main_8cpp_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">alilats2splats.main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="alilats2splats_8main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// you may not use these files except in compliance with the License.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Copyright 2012 - Gonzalo Iglesias, Adrià de Gispert, William Byrne</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="code" href="alilats2splats_8main_8cpp.html#a638a274de0f6507f00ba9805ea0ad60e">   15</a></span>&#160;<span class="preprocessor">#define HIFST</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="main_8alilats2splats_8hpp.html" title="Included headers for all the binary should be defined here. This file should be included only once...">main.alilats2splats.hpp</a>&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="main_8custom__assert_8hpp.html" title="Static variable for custom_assert. Include only once from main file.">main.custom_assert.hpp</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="main_8logger_8hpp.html" title="Static variables for logger. Include only once from main file.">main.logger.hpp</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="main-run_8alilats2splats_8hpp.html" title="Implements single-threaded version of alilats2splats tool.">main-run.alilats2splats.hpp</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="kenlmdetect_8hpp.html">kenlmdetect.hpp</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="code" href="alilats2splats_8main_8cpp.html#ac0f2228420376f4db7e1274f2b41667c">   39</a></span>&#160;<a class="code" href="applylm_8main_8cpp.html#ac0f2228420376f4db7e1274f2b41667c">main</a> ( <span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[] ) {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">using</span> <a class="code" href="classucam_1_1util_1_1Runner2.html" title="Convenience wrapper class that can kick off two type of executions: single or multithreaded, triggered by program options. Possibly multithreading with 1 thread would do, but I keep both implementations as any plain bug that might arise will be easier to trace down with a serialized execution (threadpool uses two, actually). The class is templated with two classes, one for single threading and another for multithreading. Note that the multithreading details are up to the second templated class.">ucam::util::Runner2</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">using</span> <a class="code" href="classucam_1_1hifst_1_1SingleThreadedAliLatsToSparseVecLatsTask.html" title="Full single-threaded Alignment lattices to Sparse lattices.">ucam::hifst::SingleThreadedAliLatsToSparseVecLatsTask</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">using</span> <a class="code" href="classucam_1_1hifst_1_1MultiThreadedAliLatsToSparseVecLatsTask.html" title="Multithreaded implementation of alilats2splats pipeline.">ucam::hifst::MultiThreadedAliLatsToSparseVecLatsTask</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">using</span> <a class="code" href="classucam_1_1hifst_1_1AlilatsToSparseWeightLatsData.html" title="Data class containing relevant variables. To be used as template for task classes using it...">ucam::hifst::AlilatsToSparseWeightLatsData</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="namespaceucam_1_1util.html#a573ab1424836aebe756c246cb317e6d9" title="Inits logger, parses param options checking for –logger.verbose.">ucam::util::initLogger</a> ( argc, argv );</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="logger_8boost__log_8hpp.html#a0ffb18b9a8e38dc6c286330ecde7b330">FORCELINFO</a> ( argv[0] &lt;&lt; <span class="stringliteral">&quot; starts!&quot;</span> );</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classucam_1_1util_1_1RegistryPO.html">ucam::util::RegistryPO</a> rg ( argc, argv );</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="logger_8boost__log_8hpp.html#a0ffb18b9a8e38dc6c286330ecde7b330">FORCELINFO</a> ( rg.<a class="code" href="classucam_1_1util_1_1RegistryPO.html#a9b0659fe0a40ca1804c7b483d4445581" title="Dumps all configuration parameters into a string with a reasonably pretty format.">dump</a> ( <span class="stringliteral">&quot;CONFIG parameters:\n=====================&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                         , <span class="stringliteral">&quot;=====================&quot;</span> ) );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// Detect here kenlm binary type</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// it&#39;s a bit ugly this way of initializing the correct kenlm handler</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  lm::ngram::ModelType kenmt = <a class="code" href="namespaceucam_1_1util.html#a6caaeac6f673f253ab7d02527b554199">ucam::util::detectkenlm</a> (rg.<a class="code" href="classucam_1_1util_1_1RegistryPO.html#a498b76353f978a417809cc13bdce9954" title="Convenience method that returns a vector of strings taking &quot;,&quot; as the separator character.">getVectorString</a> (</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                 <a class="code" href="namespaceHifstConstants.html#aa42b4603e57486c7d8509f7495f776fc">HifstConstants::kLmLoad</a>, 0) );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">switch</span> (kenmt) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">case</span> lm::ngram::PROBING:</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;&gt;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;&gt;  &gt; ( rg ) ) ();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">case</span> lm::ngram::REST_PROBING:</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::RestProbingModel&gt;, lm::ngram::RestProbingModel&gt;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::RestProbingModel&gt;, lm::ngram::RestProbingModel&gt;  &gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      ( rg ) ) ();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">case</span> lm::ngram::TRIE:</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::TrieModel&gt;, lm::ngram::TrieModel&gt;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::TrieModel&gt;, lm::ngram::TrieModel&gt;  &gt;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      ( rg ) ) ();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">case</span> lm::ngram::QUANT_TRIE:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::QuantTrieModel&gt;, lm::ngram::QuantTrieModel&gt;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::QuantTrieModel&gt;, lm::ngram::QuantTrieModel&gt;  &gt;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      ( rg ) ) ();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">case</span> lm::ngram::ARRAY_TRIE:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::ArrayTrieModel&gt;, lm::ngram::ArrayTrieModel  &gt;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::ArrayTrieModel&gt;, lm::ngram::ArrayTrieModel&gt;  &gt;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      ( rg ) ) ();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">case</span> lm::ngram::QUANT_ARRAY_TRIE:</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    ( Runner2&lt;SingleThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::QuantArrayTrieModel&gt;, lm::ngram::QuantArrayTrieModel&gt;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      , MultiThreadedAliLatsToSparseVecLatsTask&lt;AlilatsToSparseWeightLatsData&lt;lm::ngram::QuantArrayTrieModel&gt;, lm::ngram::QuantArrayTrieModel&gt; &gt;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      ( rg ) ) ();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="logger_8boost__log_8hpp.html#a0ffb18b9a8e38dc6c286330ecde7b330">FORCELINFO</a> ( argv[0] &lt;&lt; <span class="stringliteral">&quot; ends!&quot;</span> );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_701c0c8b41b031e69113781f2f4e5321.html">ucam-smt</a></li><li class="navelem"><a class="el" href="dir_6c232e806e8d6cc2bbc4c32b14734fc5.html">cpp</a></li><li class="navelem"><a class="el" href="dir_0cacff711d9dc9dc4c966bb9098ee40d.html">hifst</a></li><li class="navelem"><a class="el" href="alilats2splats_8main_8cpp.html">alilats2splats.main.cpp</a></li>
    <li class="footer">Generated on Tue May 27 2014 21:15:50 for Cambridge SMT System by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
