<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Cambridge SMT System: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cambridge SMT System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p>For a detailed discussion of LMBR, see Chapters 7 and 8 in [<a class="el" href="index.html#BlackwoodPhD">BlackwoodPhD</a>].</p>
<p>LMBR is a decoding procedure, based on the following:</p>
<ul>
<li>Evidence space: a lattice (WFSA) containing weighted translations produced by the SMT system.<ul>
<li>N-gram posterior distributions, with pathwise posteriors, are extracted from this WFSA.</li>
</ul>
</li>
<li>The hypotheses space: an unweighted lattice (FSA) containing hypotheses to be rescored.</li>
</ul>
<p>The following steps are carried out in LMBR decoding:</p>
<ol type="1">
<li>The evidence space is normalised after applying a grammar scale factor (<code>--alpha=</code>). Scaling is done by the <a class="el" href="index.html#OpenFst">OpenFst</a> <a href="http://www.openfst.org/twiki/bin/view/FST/PushDoc">Push</a> towards final states, and setting the final state probability to 1.0.</li>
<li>N-grams are extracted from the hypothesis space.</li>
<li>N-gram path-posterior probabilities are computed over the evidence space using a modified Forward procedure (see <a class="el" href="index.html#Blackwood2010">Blackwood2010</a>)</li>
<li>Cyclic WFSAs are built to represent posterior probability distribution of each n-gram order and compose with the original hypotheses space. A word insertion penalty (<code>--wps=</code>) is also included in the costs of the cyclic WFSAs.</li>
<li>Risk is computed through a sequence of compositions.</li>
<li>The result for LMBR decoding is a WFSA; each weighted path represents a hypothesis and its risk.</li>
</ol>
<p>The weighted hypothesis space can be save as a WFSA, or the minimum risk hypothesis can be generated via the <a class="el" href="index.html#OpenFst">OpenFst</a> <a href="http://www.openfst.org/twiki/bin/view/FST/ShortestPathDoc">ShortestPath</a> operation.</p>
<p>The following example applies LMBR decoding to the baseline lattices </p>
<pre class="fragment">&gt; lmbr.O2 --config=configs/CF.baseline.lmbr &amp;&gt; log/log.baseline.lmbr
</pre><p>The LMBR output hyppthesis file keeps the scale factor, word penalty, and sentence id at the start of the file; the hypothesis follows the colon </p>
<pre class="fragment">&gt; cat output/exp.baseline.lmbr/HYPS/0.40_0.02.hyp
0.4 0.02 1:1 3 9121 384 6 2756 7 3 4144 6 159312 42 1341 2
0.4 0.02 2:1 3 1119 6 3 9121 1711 54 79 6 3 85 7 525 3 13907 17 3 628 5 2
</pre><p>LMBR can be optimised by tuning the grammar scale factor and word insertion penalty. Once lattices are loaded into memory and n-grams are extracted (steps 1 - 5), rescoring is fast enough that it is practical and efficient to perform a grid search over a range of parameter values (see config file).</p>
<p>Hypotheses are written to different files, with names based on parameter values (e.g. as <code>--writeonebest=output/exp.baseline.lmbr/HYPS/%alpha%_%wps%%.hyp</code> ). The best set of values can be selected based on BLEU score, after mapping each integer mapped output back to words, detokenizing, and scoring on against references.</p>
<p>LMBR relies on a unigram precision (p) and precision ratio (r) that are computed over a development set, e.g. with verbose logs of a BLEU scorer such as NIST mteval1. The script <code>$HiFSTROOT/scripts/lmbr/compute-testset-precisions.pl</code> is included for this purpose.</p>
<p>If the option <code>--preprune=</code> is specified, the evidence space is pruned prior to computing posterior probabilities (i.e. pruning is done at threshold 7 in this example). If this option is not defined, the full evidence space will be passed through. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 26 2014 00:15:20 for Cambridge SMT System by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
