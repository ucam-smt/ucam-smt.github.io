

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cam.sgnmt.misc package &mdash; SGNMT 0.4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="SGNMT 0.4 documentation" href="index.html"/>
        <link rel="up" title="cam.sgnmt package" href="cam.sgnmt.html"/>
        <link rel="next" title="cam.sgnmt.predictors package" href="cam.sgnmt.predictors.html"/>
        <link rel="prev" title="cam.sgnmt.decoding package" href="cam.sgnmt.decoding.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SGNMT
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_components.html">Tutorial: Adding new components</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command-line reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="predictors.html">Predictors</a></li>
<li class="toctree-l1"><a class="reference internal" href="decoders.html">Decoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Common issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cam.sgnmt.html">All modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cam.sgnmt.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.blocks.html">cam.sgnmt.blocks package</a></li>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.decoding.html">cam.sgnmt.decoding package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">cam.sgnmt.misc package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cam.sgnmt.misc.sparse">cam.sgnmt.misc.sparse module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cam.sgnmt.misc.trie">cam.sgnmt.misc.trie module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cam.sgnmt.misc.unigram">cam.sgnmt.misc.unigram module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cam.sgnmt.misc">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.predictors.html">cam.sgnmt.predictors package</a></li>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.tf.html">cam.sgnmt.tf package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#cam-sgnmt-decode-module">cam.sgnmt.decode module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#module-cam.sgnmt.decode_utils">cam.sgnmt.decode_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#module-cam.sgnmt.output">cam.sgnmt.output module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#module-cam.sgnmt.ui">cam.sgnmt.ui module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#module-cam.sgnmt.utils">cam.sgnmt.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.html#module-cam.sgnmt">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SGNMT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="cam.sgnmt.html">cam.sgnmt package</a> &raquo;</li>
      
    <li>cam.sgnmt.misc package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/cam.sgnmt.misc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cam-sgnmt-misc-package">
<h1>cam.sgnmt.misc package<a class="headerlink" href="#cam-sgnmt-misc-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cam.sgnmt.misc.sparse">
<span id="cam-sgnmt-misc-sparse-module"></span><h2>cam.sgnmt.misc.sparse module<a class="headerlink" href="#module-cam.sgnmt.misc.sparse" title="Permalink to this headline">¶</a></h2>
<p>This module adds support for sparse input or output features. In
standard NMT we normally use a one-hot-representation, and input and
output layers are lookup tables (embedding matrices). SGNMT supports
explicit definition of word representations as sparse features, in
which more than one neuron can be activated at a time.</p>
<dl class="class">
<dt id="cam.sgnmt.misc.sparse.FileBasedFeatMap">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">FileBasedFeatMap</code><span class="sig-paren">(</span><em>dim</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FileBasedFeatMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FileBasedFeatMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.sparse.SparseFeatMap" title="cam.sgnmt.misc.sparse.SparseFeatMap"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.sparse.SparseFeatMap</span></code></a></p>
<p>This class loads the mapping from word to sparse feature from
a file (see <code class="docutils literal"><span class="pre">--src_sparse_feat_map</span></code> and <code class="docutils literal"><span class="pre">--trg_sparse_feat_map</span></code>)
The mapping from word to feature is a simple dictionary lookup.</p>
<p>The mapping from feature to word is implemented with a Trie based
nearest neighbor implementation and does not require an exact
match. However, in case of an exact match, is runs linearly in the
number of non-zero entries in the vector.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FileBasedFeatMap.sparse2nwords">
<code class="descname">sparse2nwords</code><span class="sig-paren">(</span><em>feat</em>, <em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FileBasedFeatMap.sparse2nwords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FileBasedFeatMap.sparse2nwords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FileBasedFeatMap.sparse2word">
<code class="descname">sparse2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FileBasedFeatMap.sparse2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FileBasedFeatMap.sparse2word" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FileBasedFeatMap.word2sparse">
<code class="descname">word2sparse</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FileBasedFeatMap.word2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FileBasedFeatMap.word2sparse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">FlatSparseFeatMap</code><span class="sig-paren">(</span><em>dim=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.sparse.SparseFeatMap" title="cam.sgnmt.misc.sparse.SparseFeatMap"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.sparse.SparseFeatMap</span></code></a></p>
<p>Can be used as replacement if a <code class="docutils literal"><span class="pre">SparseFeatMap</span></code> is required
but you wish to use flat word ids. It overrides the dense methods
with the identities.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.dense2sparse">
<code class="descname">dense2sparse</code><span class="sig-paren">(</span><em>dense</em>, <em>eps=0.3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.dense2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.dense2sparse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Raise:</dt>
<dd>NotImplementedError.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.dense2word">
<code class="descname">dense2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.dense2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.dense2word" title="Permalink to this definition">¶</a></dt>
<dd><p>Identity.</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.sparse2dense">
<code class="descname">sparse2dense</code><span class="sig-paren">(</span><em>sparse</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.sparse2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.sparse2dense" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Raise:</dt>
<dd>NotImplementedError.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.sparse2word">
<code class="descname">sparse2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.sparse2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.sparse2word" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Raise:</dt>
<dd>NotImplementedError.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.word2dense">
<code class="descname">word2dense</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.word2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.word2dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Identity.</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.word2sparse">
<code class="descname">word2sparse</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.word2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.word2sparse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Raise:</dt>
<dd>NotImplementedError.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.FlatSparseFeatMap.words2dense">
<code class="descname">words2dense</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#FlatSparseFeatMap.words2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.FlatSparseFeatMap.words2dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Identity.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">SparseFeatMap</code><span class="sig-paren">(</span><em>dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This is the super class for mapping strategies between sparse
feature representations and symbolic word indices. The translation
needs to be implemented in <code class="docutils literal"><span class="pre">sparse2word</span></code> and <code class="docutils literal"><span class="pre">word2sparse</span></code>.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.dense2nwords">
<code class="descname">dense2nwords</code><span class="sig-paren">(</span><em>feat</em>, <em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.dense2nwords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.dense2nwords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the n closest words to <code class="docutils literal"><span class="pre">feat</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>feat</strong> (<em>list</em>) &#8211; Dense feature vector</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of words to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>List of (wordid, distance) tuples with words which</dt>
<dd><p class="first last">are close to <code class="docutils literal"><span class="pre">feat</span></code>.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default implementation does not use the <code class="docutils literal"><span class="pre">n</span></code> argument
and always returns distance 0.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.dense2sparse">
<code class="descname">dense2sparse</code><span class="sig-paren">(</span><em>dense</em>, <em>eps=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.dense2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.dense2sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a dense vector to a sparse vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dense</strong> (<em>list</em>) &#8211; Dense vector (list of length n)</li>
<li><strong>eps</strong> (<em>float</em>) &#8211; Values smaller than this are set to zero
in the sparse representation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list. List of (dimension, value) tuples (sparse vector)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.dense2word">
<code class="descname">dense2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.dense2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.dense2word" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the word id for a dense feature.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>feat</strong> (<em>list</em>) &#8211; Dense feature vector to look up</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>int. Word ID of a match for <code class="docutils literal"><span class="pre">feat</span></code> or <code class="docutils literal"><span class="pre">None</span></code> is no</dt>
<dd>match could be found</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NotImplementedError.</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.dense2words">
<code class="descname">dense2words</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.dense2words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.dense2words" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies <code class="docutils literal"><span class="pre">dense2word</span></code> to a sequence.</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.sparse2dense">
<code class="descname">sparse2dense</code><span class="sig-paren">(</span><em>sparse</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.sparse2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.sparse2dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a sparse vector to its dense representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sparse</strong> (<em>list</em>) &#8211; Sparse vector (list of tuples)</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><em>IndexError. If the input vector exceeds the dimensionality</em> &#8211; of this map</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.sparse2nwords">
<code class="descname">sparse2nwords</code><span class="sig-paren">(</span><em>feat</em>, <em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.sparse2nwords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.sparse2nwords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the n closest words to <code class="docutils literal"><span class="pre">feat</span></code>. Subclasses can
implement this method to implement search for words. The
default implementation returns the single best word only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>feat</strong> (<em>list</em>) &#8211; Sparse feature</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of words to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>List of (wordid, distance) tuples with words which</dt>
<dd><p class="first last">are close to <code class="docutils literal"><span class="pre">feat</span></code>.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default implementation does not use the <code class="docutils literal"><span class="pre">n</span></code> argument
and always returns distance 0.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.sparse2word">
<code class="descname">sparse2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.sparse2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.sparse2word" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the word id for a sparse feature. The sparse feature
format is a list of tuples [(dim1,val1),..,(dimN,valN)]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>feat</strong> (<em>list</em>) &#8211; Sparse feature to look up</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>int. Word ID of a match for <code class="docutils literal"><span class="pre">feat</span></code> or <code class="docutils literal"><span class="pre">None</span></code> is no</dt>
<dd>match could be found</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NotImplementedError.</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.word2dense">
<code class="descname">word2dense</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.word2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.word2dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the feature representation in dense format, i.e. a
<code class="docutils literal"><span class="pre">self.dim</span></code>-dimensional vector as list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>word</strong> (<em>int</em>) &#8211; Word ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list. Dense vector corresponding to <code class="docutils literal"><span class="pre">word</span></code> or the null
vector if no representation found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.word2sparse">
<code class="descname">word2sparse</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.word2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.word2sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the sparse feature representation for a word.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>word</strong> (<em>int</em>) &#8211; Word ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>list. Sparse feature representation for <code class="docutils literal"><span class="pre">word</span></code> or <code class="docutils literal"><span class="pre">None</span></code></dt>
<dd>if the word could not be converted</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NotImplementedError.</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.SparseFeatMap.words2dense">
<code class="descname">words2dense</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#SparseFeatMap.words2dense"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.SparseFeatMap.words2dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies <code class="docutils literal"><span class="pre">word2dense</span></code> to a word sequence.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.sparse.TrivialSparseFeatMap">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">TrivialSparseFeatMap</code><span class="sig-paren">(</span><em>dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#TrivialSparseFeatMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.TrivialSparseFeatMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.sparse.SparseFeatMap" title="cam.sgnmt.misc.sparse.SparseFeatMap"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.sparse.SparseFeatMap</span></code></a></p>
<p>This is the null-object (GoF) implementation for
<code class="docutils literal"><span class="pre">SparseFeatMap</span></code>. It corresponds to the usual one-hot
representation.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.sparse.TrivialSparseFeatMap.sparse2word">
<code class="descname">sparse2word</code><span class="sig-paren">(</span><em>feat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#TrivialSparseFeatMap.sparse2word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.TrivialSparseFeatMap.sparse2word" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns feat[0][0]</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.sparse.TrivialSparseFeatMap.word2sparse">
<code class="descname">word2sparse</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#TrivialSparseFeatMap.word2sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.TrivialSparseFeatMap.word2sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns [(word, 1)]</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.misc.sparse.dense_euclidean">
<code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">dense_euclidean</code><span class="sig-paren">(</span><em>v1</em>, <em>v2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#dense_euclidean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.dense_euclidean" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Euclidean distance between two sparse
vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v1</strong> (<em>dict</em>) &#8211; First dense vector</li>
<li><strong>v2</strong> (<em>dict</em>) &#8211; Second dense vector</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float. Distance between <code class="docutils literal"><span class="pre">v1</span></code> and <code class="docutils literal"><span class="pre">v2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.misc.sparse.dense_euclidean2">
<code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">dense_euclidean2</code><span class="sig-paren">(</span><em>v1</em>, <em>v2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#dense_euclidean2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.dense_euclidean2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the squared Euclidean distance between two dense
vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v1</strong> (<em>dict</em>) &#8211; First dense vector</li>
<li><strong>v2</strong> (<em>dict</em>) &#8211; Second dense vector</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float. Squared distance between <code class="docutils literal"><span class="pre">v1</span></code> and <code class="docutils literal"><span class="pre">v2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.misc.sparse.sparse_euclidean">
<code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">sparse_euclidean</code><span class="sig-paren">(</span><em>v1</em>, <em>v2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#sparse_euclidean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.sparse_euclidean" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Euclidean distance between two sparse
vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v1</strong> (<em>dict</em>) &#8211; First sparse vector</li>
<li><strong>v2</strong> (<em>dict</em>) &#8211; Second sparse vector</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float. Distance between <code class="docutils literal"><span class="pre">v1</span></code> and <code class="docutils literal"><span class="pre">v2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.misc.sparse.sparse_euclidean2">
<code class="descclassname">cam.sgnmt.misc.sparse.</code><code class="descname">sparse_euclidean2</code><span class="sig-paren">(</span><em>v1</em>, <em>v2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/sparse.html#sparse_euclidean2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.sparse.sparse_euclidean2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the squared Euclidean distance between two sparse
vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v1</strong> (<em>dict</em>) &#8211; First sparse vector</li>
<li><strong>v2</strong> (<em>dict</em>) &#8211; Second sparse vector</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float. Squared distance between <code class="docutils literal"><span class="pre">v1</span></code> and <code class="docutils literal"><span class="pre">v2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.misc.trie">
<span id="cam-sgnmt-misc-trie-module"></span><h2>cam.sgnmt.misc.trie module<a class="headerlink" href="#module-cam.sgnmt.misc.trie" title="Permalink to this headline">¶</a></h2>
<p>This module contains <code class="docutils literal"><span class="pre">SimpleTrie</span></code> which is a generic trie
implementation based on strings of integers.</p>
<dl class="class">
<dt id="cam.sgnmt.misc.trie.SimpleNode">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.trie.</code><code class="descname">SimpleNode</code><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class representing a node in a <code class="docutils literal"><span class="pre">SimpleTrie</span></code></p>
</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.trie.SimpleTrie">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.trie.</code><code class="descname">SimpleTrie</code><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a very simple Trie implementation. It is simpler than
the one in <code class="docutils literal"><span class="pre">cam.sgnmt.predictors.grammar</span></code> because it does not
support non-terminals or removal. The only supported operations are
<code class="docutils literal"><span class="pre">add</span></code> and <code class="docutils literal"><span class="pre">get</span></code>, but those are implemented very efficiently.
For many applications (e.g. the cache in the greedy heuristic) this
is already enough.</p>
<p>The implementation also supports keys in sparse representation,
in which most of the elements in the sequence are zero (see
<code class="docutils literal"><span class="pre">add_sparse</span></code>, <code class="docutils literal"><span class="pre">get_sparse</span></code>, and <code class="docutils literal"><span class="pre">nearest_sparse</span></code>. In this
case, the key is a list of tuples [(dim1,val1),...(dimN,valN)].
Internally, we store them as sequence &#8220;dim1 val1 dim2 val2...&#8221;
Note that we assume that the tuples are ordered by dimension!</p>
<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>seq</em>, <em>element</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an element to the Trie for the key <code class="docutils literal"><span class="pre">seq</span></code>. If <code class="docutils literal"><span class="pre">seq</span></code>
already exists, override.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seq</strong> (<em>list</em>) &#8211; Key</li>
<li><strong>element</strong> (<em>object</em>) &#8211; The object to store for key <code class="docutils literal"><span class="pre">seq</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.add_sparse">
<code class="descname">add_sparse</code><span class="sig-paren">(</span><em>key</em>, <em>element</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.add_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.add_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an element with a key in sparse representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seq</strong> (<em>list</em>) &#8211; Sparse key (list of tuples)</li>
<li><strong>element</strong> (<em>object</em>) &#8211; The object to store for key <code class="docutils literal"><span class="pre">seq</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the element for a key <code class="docutils literal"><span class="pre">seq</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>seq</strong> (<em>list</em>) &#8211; Query key</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">object. The element which has been added along with <code class="docutils literal"><span class="pre">seq</span></code>
or <code class="docutils literal"><span class="pre">None</span></code> if the key does not exist.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.get_prefix">
<code class="descname">get_prefix</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.get_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.get_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the key in the Trie with the longest common prefix with
<code class="docutils literal"><span class="pre">seq</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>seq</strong> (<em>list</em>) &#8211; Query sequence</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list. The longest key in the Trie which is a prefix of
<code class="docutils literal"><span class="pre">seq</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.get_sparse">
<code class="descname">get_sparse</code><span class="sig-paren">(</span><em>key</em>, <em>element</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.get_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.get_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves an element with a key in sparse representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>seq</strong> (<em>list</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">object. The element which has been added along with <code class="docutils literal"><span class="pre">seq</span></code>
or <code class="docutils literal"><span class="pre">None</span></code> if the key does not exist.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.n_nearest_sparse">
<code class="descname">n_nearest_sparse</code><span class="sig-paren">(</span><em>query</em>, <em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.n_nearest_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.n_nearest_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the n element in the Trie with the closest
key to <code class="docutils literal"><span class="pre">query</span></code> in terms of Euclidean distance. The efficiency
relies on sparseness: The more zeros in the vector, the more
efficient.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> (<em>list</em>) &#8211; Query key in sparse format</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of elements to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List. List of (object,dist) pairs with the nearest element to
<code class="docutils literal"><span class="pre">query</span></code> in terms of L2 norm and the squared L2 distance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.trie.SimpleTrie.nearest_sparse">
<code class="descname">nearest_sparse</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/trie.html#SimpleTrie.nearest_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.trie.SimpleTrie.nearest_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the element in the Trie with the closest
key to <code class="docutils literal"><span class="pre">query</span></code> in terms of Euclidean distance. The efficiency
relies on sparseness: The more zeros in the vector, the more
efficient. If the Trie contains an exact match, this method
runs linear in the length of the query (i.e. independent of
number of elements in the Trie).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>query</strong> (<em>list</em>) &#8211; Query key in sparse format</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Tuple. (object,dist) pair with the nearest element to
<code class="docutils literal"><span class="pre">query</span></code> in terms of L2 norm and the squared L2 distance.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.misc.unigram">
<span id="cam-sgnmt-misc-unigram-module"></span><h2>cam.sgnmt.misc.unigram module<a class="headerlink" href="#module-cam.sgnmt.misc.unigram" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes which are able to store unigram
probabilities and potentially collect them by observing a
decoder instance. This can be used for heuristics.</p>
<dl class="class">
<dt id="cam.sgnmt.misc.unigram.AllStatsUnigramTable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.unigram.</code><code class="descname">AllStatsUnigramTable</code><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#AllStatsUnigramTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.AllStatsUnigramTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.unigram.UnigramTable" title="cam.sgnmt.misc.unigram.UnigramTable"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.unigram.UnigramTable</span></code></a></p>
<p>This unigram table collect statistics from all partial hypos.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.unigram.AllStatsUnigramTable.notify">
<code class="descname">notify</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#AllStatsUnigramTable.notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.AllStatsUnigramTable.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Update unigram statistics. We assume to observe a Decoder
instance. We update the unigram table if the message type
is <code class="docutils literal"><span class="pre">MESSAGE_TYPE_POSTERIOR</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>object</em>) &#8211; Message from an observable <code class="docutils literal"><span class="pre">Decoder</span></code></li>
<li><strong>message_type</strong> (<em>int</em>) &#8211; Message type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.unigram.BestStatsUnigramTable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.unigram.</code><code class="descname">BestStatsUnigramTable</code><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#BestStatsUnigramTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.BestStatsUnigramTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.unigram.UnigramTable" title="cam.sgnmt.misc.unigram.UnigramTable"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.unigram.UnigramTable</span></code></a></p>
<p>This unigram table collect statistics from the best full hypo.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.unigram.BestStatsUnigramTable.notify">
<code class="descname">notify</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#BestStatsUnigramTable.notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.BestStatsUnigramTable.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Update unigram statistics. We assume to observe a Decoder
instance. We update the unigram table if the message type
is <code class="docutils literal"><span class="pre">MESSAGE_TYPE_FULL_HYPO</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>object</em>) &#8211; Message from an observable <code class="docutils literal"><span class="pre">Decoder</span></code></li>
<li><strong>message_type</strong> (<em>int</em>) &#8211; Message type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.unigram.BestStatsUnigramTable.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#BestStatsUnigramTable.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.BestStatsUnigramTable.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called to reset collected statistics between each
sentence pair.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.unigram.FileUnigramTable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.unigram.</code><code class="descname">FileUnigramTable</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#FileUnigramTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.FileUnigramTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.unigram.UnigramTable" title="cam.sgnmt.misc.unigram.UnigramTable"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.unigram.UnigramTable</span></code></a></p>
<p>Loads a unigram table from an external file.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.unigram.FileUnigramTable.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#FileUnigramTable.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.FileUnigramTable.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.unigram.FullStatsUnigramTable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.unigram.</code><code class="descname">FullStatsUnigramTable</code><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#FullStatsUnigramTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.FullStatsUnigramTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.misc.unigram.UnigramTable" title="cam.sgnmt.misc.unigram.UnigramTable"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.misc.unigram.UnigramTable</span></code></a></p>
<p>This unigram table collect statistics from all full hypos.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.unigram.FullStatsUnigramTable.notify">
<code class="descname">notify</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#FullStatsUnigramTable.notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.FullStatsUnigramTable.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Update unigram statistics. We assume to observe a Decoder
instance. We update the unigram table if the message type
is <code class="docutils literal"><span class="pre">MESSAGE_TYPE_FULL_HYPO</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>object</em>) &#8211; Message from an observable <code class="docutils literal"><span class="pre">Decoder</span></code></li>
<li><strong>message_type</strong> (<em>int</em>) &#8211; Message type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.misc.unigram.UnigramTable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.misc.unigram.</code><code class="descname">UnigramTable</code><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#UnigramTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.UnigramTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cam.sgnmt.html#cam.sgnmt.utils.Observer" title="cam.sgnmt.utils.Observer"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.utils.Observer</span></code></a></p>
<p>A unigram table stores unigram probabilities for a certain
vocabulary. These statistics can be loaded from an external
file (<code class="docutils literal"><span class="pre">FileUnigramTable</span></code>) or collected during decoding.</p>
<dl class="method">
<dt id="cam.sgnmt.misc.unigram.UnigramTable.estimate">
<code class="descname">estimate</code><span class="sig-paren">(</span><em>word</em>, <em>default=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#UnigramTable.estimate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.UnigramTable.estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the unigram score for the given word.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>word</strong> (<em>int</em>) &#8211; word ID</li>
<li><strong>default</strong> (<em>float</em>) &#8211; Default value to be returned if <code class="docutils literal"><span class="pre">word</span></code>
cannot be found in the table</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float. Unigram score or <code class="docutils literal"><span class="pre">default</span></code> if <code class="docutils literal"><span class="pre">word</span></code> is not in
table</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.unigram.UnigramTable.notify">
<code class="descname">notify</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#UnigramTable.notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.UnigramTable.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Unigram tables usually observe the decoder, but some
do not process messages from the decoder. This is an empty
implementation of <code class="docutils literal"><span class="pre">notify</span></code> for those implementations.</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.misc.unigram.UnigramTable.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/misc/unigram.html#UnigramTable.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.misc.unigram.UnigramTable.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called to reset collected statistics between each
sentence pair.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.misc">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cam.sgnmt.misc" title="Permalink to this headline">¶</a></h2>
<p>This package contains miscellaneous routines and classes, e.g. for
preprocessing and feature extraction which are independent of the used
framework (blocks, tensorflow...). For example, this includes rolling
out sparse features into a dense representation or searching for the
best surface form for a given attribute vector. <code class="docutils literal"><span class="pre">trie</span></code> contains a
generic trie implementation, <code class="docutils literal"><span class="pre">unigram</span></code> can be used for keeping
track of unigram statistics during decoding.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cam.sgnmt.predictors.html" class="btn btn-neutral float-right" title="cam.sgnmt.predictors package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cam.sgnmt.decoding.html" class="btn btn-neutral" title="cam.sgnmt.decoding package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, University of Cambridge.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>