

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cam.sgnmt package &mdash; SGNMT 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="SGNMT 1.0 documentation" href="index.html"/>
        <link rel="next" title="cam.sgnmt.decoding package" href="cam.sgnmt.decoding.html"/>
        <link rel="prev" title="Publications" href="publications.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SGNMT
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial: Basics (T2T)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_pytorch.html">Tutorial: fairseq (PyTorch)</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_components.html">Tutorial: Adding new components</a></li>
<li class="toctree-l1"><a class="reference internal" href="bea19_gec.html">Tutorial:  Grammatical error correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_blocks.html">Tutorial: Blocks/Thano (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command-line reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="predictors.html">Predictors</a></li>
<li class="toctree-l1"><a class="reference internal" href="decoders.html">Decoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Common issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">All modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.decoding.html">cam.sgnmt.decoding package</a></li>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.misc.html">cam.sgnmt.misc package</a></li>
<li class="toctree-l3"><a class="reference internal" href="cam.sgnmt.predictors.html">cam.sgnmt.predictors package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cam-sgnmt-decode-module">cam.sgnmt.decode module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.decode_utils">cam.sgnmt.decode_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cam-sgnmt-extract-scores-along-reference-module">cam.sgnmt.extract_scores_along_reference module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.io">cam.sgnmt.io module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.output">cam.sgnmt.output module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.tf_utils">cam.sgnmt.tf_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.ui">cam.sgnmt.ui module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt.utils">cam.sgnmt.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cam.sgnmt">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SGNMT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>cam.sgnmt package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/cam.sgnmt.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cam-sgnmt-package">
<h1>cam.sgnmt package<a class="headerlink" href="#cam-sgnmt-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cam.sgnmt.decoding.html">cam.sgnmt.decoding package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.astar">cam.sgnmt.decoding.astar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.beam">cam.sgnmt.decoding.beam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.bigramgreedy">cam.sgnmt.decoding.bigramgreedy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.bucket">cam.sgnmt.decoding.bucket module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.combibeam">cam.sgnmt.decoding.combibeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.combination">cam.sgnmt.decoding.combination module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.core">cam.sgnmt.decoding.core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.dfs">cam.sgnmt.decoding.dfs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.flip">cam.sgnmt.decoding.flip module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.fstbeam">cam.sgnmt.decoding.fstbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.greedy">cam.sgnmt.decoding.greedy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.heuristics">cam.sgnmt.decoding.heuristics module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.interpolation">cam.sgnmt.decoding.interpolation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.mbrbeam">cam.sgnmt.decoding.mbrbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.multisegbeam">cam.sgnmt.decoding.multisegbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.predlimitbeam">cam.sgnmt.decoding.predlimitbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.restarting">cam.sgnmt.decoding.restarting module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.sepbeam">cam.sgnmt.decoding.sepbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.syncbeam">cam.sgnmt.decoding.syncbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding.syntaxbeam">cam.sgnmt.decoding.syntaxbeam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.decoding.html#module-cam.sgnmt.decoding">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cam.sgnmt.misc.html">cam.sgnmt.misc package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.misc.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.misc.html#module-cam.sgnmt.misc.sparse">cam.sgnmt.misc.sparse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.misc.html#module-cam.sgnmt.misc.trie">cam.sgnmt.misc.trie module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.misc.html#module-cam.sgnmt.misc.unigram">cam.sgnmt.misc.unigram module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.misc.html#module-cam.sgnmt.misc">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cam.sgnmt.predictors.html">cam.sgnmt.predictors package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.automata">cam.sgnmt.predictors.automata module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.bow">cam.sgnmt.predictors.bow module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.core">cam.sgnmt.predictors.core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.forced">cam.sgnmt.predictors.forced module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.grammar">cam.sgnmt.predictors.grammar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.length">cam.sgnmt.predictors.length module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.misc">cam.sgnmt.predictors.misc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.ngram">cam.sgnmt.predictors.ngram module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.parse">cam.sgnmt.predictors.parse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.pytorch_fairseq">cam.sgnmt.predictors.pytorch_fairseq module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.structure">cam.sgnmt.predictors.structure module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.tf_nizza">cam.sgnmt.predictors.tf_nizza module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.tf_t2t">cam.sgnmt.predictors.tf_t2t module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.tokenization">cam.sgnmt.predictors.tokenization module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors.vocabulary">cam.sgnmt.predictors.vocabulary module</a></li>
<li class="toctree-l2"><a class="reference internal" href="cam.sgnmt.predictors.html#module-cam.sgnmt.predictors">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="cam-sgnmt-decode-module">
<h2>cam.sgnmt.decode module<a class="headerlink" href="#cam-sgnmt-decode-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cam.sgnmt.decode_utils">
<span id="cam-sgnmt-decode-utils-module"></span><h2>cam.sgnmt.decode_utils module<a class="headerlink" href="#module-cam.sgnmt.decode_utils" title="Permalink to this headline">¶</a></h2>
<p>This module is the bridge between the command line configuration of
the decode.py script and the SGNMT software architecture consisting of
decoders, predictors, and output handlers. A common use case is to call
<cite>create_decoder()</cite> first, which reads the SGNMT configuration and loads
the right predictors and decoding strategy with the right arguments.
The actual decoding is implemented in <cite>do_decode()</cite>. See <cite>decode.py</cite>
to learn how to use this module.</p>
<dl class="function">
<dt id="cam.sgnmt.decode_utils.add_heuristics">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">add_heuristics</code><span class="sig-paren">(</span><em>decoder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#add_heuristics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.add_heuristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds all enabled heuristics to the <code class="docutils literal"><span class="pre">decoder</span></code>. This is relevant
for heuristic based search strategies like A*. This method relies
on the global <code class="docutils literal"><span class="pre">args</span></code> variable and reads out <code class="docutils literal"><span class="pre">args.heuristics</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>decoder</strong> (<a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><em>Decoder</em></a>) &#8211; Decoding strategy, see <code class="docutils literal"><span class="pre">create_decoder()</span></code>.
This method will add heuristics to this instance with
<code class="docutils literal"><span class="pre">add_heuristic()</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.add_predictors">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">add_predictors</code><span class="sig-paren">(</span><em>decoder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#add_predictors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.add_predictors" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds all enabled predictors to the <code class="docutils literal"><span class="pre">decoder</span></code>. This function
makes heavy use of the global <code class="docutils literal"><span class="pre">args</span></code> which contains the
SGNMT configuration. Particularly, it reads out <code class="docutils literal"><span class="pre">args.predictors</span></code>
and adds appropriate instances to <code class="docutils literal"><span class="pre">decoder</span></code>.
TODO: Refactor this method as it is waaaay tooooo looong</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>decoder</strong> (<a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><em>Decoder</em></a>) &#8211; Decoding strategy, see <code class="docutils literal"><span class="pre">create_decoder()</span></code>.
This method will add predictors to this instance with
<code class="docutils literal"><span class="pre">add_predictor()</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.decode_utils.args">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">args</code><em class="property"> = None</em><a class="headerlink" href="#cam.sgnmt.decode_utils.args" title="Permalink to this definition">¶</a></dt>
<dd><p>This variable is set to the global configuration when
base_init().</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.base_init">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">base_init</code><span class="sig-paren">(</span><em>new_args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#base_init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.base_init" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should be called before accessing any other
function in this module. It initializes the <cite>args</cite> variable on
which all the create_* factory functions rely on as configuration
object, and it sets up global function pointers and variables for
basic things like the indexing scheme, logging verbosity, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_args</strong> &#8211; Configuration object from the argument parser.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.create_decoder">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">create_decoder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#create_decoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.create_decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the <code class="docutils literal"><span class="pre">Decoder</span></code> instance. This specifies the search
strategy used to traverse the space spanned by the predictors. This
method relies on the global <code class="docutils literal"><span class="pre">args</span></code> variable.</p>
<p>TODO: Refactor to avoid long argument lists</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Decoder. Instance of the search strategy</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.create_output_handlers">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">create_output_handlers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#create_output_handlers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.create_output_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the output handlers defined in the <code class="docutils literal"><span class="pre">io</span></code> module.
These handlers create output files in different formats from the
decoding results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> &#8211; Global command line arguments.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list. List of output handlers according &#8211;outputs</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.do_decode">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">do_decode</code><span class="sig-paren">(</span><em>decoder</em>, <em>output_handlers</em>, <em>src_sentences</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#do_decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.do_decode" title="Permalink to this definition">¶</a></dt>
<dd><p>This method contains the main decoding loop. It iterates through
<code class="docutils literal"><span class="pre">src_sentences</span></code> and applies <code class="docutils literal"><span class="pre">decoder.decode()</span></code> to each of them.
At the end, it calls the output handlers to create output files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>decoder</strong> (<a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><em>Decoder</em></a>) &#8211; Current decoder instance</li>
<li><strong>output_handlers</strong> (<em>list</em>) &#8211; List of output handlers, see
<code class="docutils literal"><span class="pre">create_output_handlers()</span></code></li>
<li><strong>src_sentences</strong> (<em>list</em>) &#8211; A list of strings. The strings are the
source sentences with word indices to
translate (e.g. &#8216;1 123 432 2&#8217;)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.decode_utils.get_sentence_indices">
<code class="descclassname">cam.sgnmt.decode_utils.</code><code class="descname">get_sentence_indices</code><span class="sig-paren">(</span><em>range_param</em>, <em>src_sentences</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/decode_utils.html#get_sentence_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.decode_utils.get_sentence_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method for <code class="docutils literal"><span class="pre">do_decode</span></code> which returns the indices of the
sentence to decode</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>range_param</strong> (<em>string</em>) &#8211; <code class="docutils literal"><span class="pre">--range</span></code> parameter from config</li>
<li><strong>src_sentences</strong> (<em>list</em>) &#8211; A list of strings. The strings are the
source sentences with word indices to
translate (e.g. &#8216;1 123 432 2&#8217;)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="cam-sgnmt-extract-scores-along-reference-module">
<h2>cam.sgnmt.extract_scores_along_reference module<a class="headerlink" href="#cam-sgnmt-extract-scores-along-reference-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cam.sgnmt.io">
<span id="cam-sgnmt-io-module"></span><h2>cam.sgnmt.io module<a class="headerlink" href="#module-cam.sgnmt.io" title="Permalink to this headline">¶</a></h2>
<p>This module is responsible for converting input text to integer
representations (encode()), and integer translation hypotheses back to
readable text (decode()). In the default configuration, this conversion
is an identity mapping: Source sentences are provided in integer
representations, and output files also contain indexed sentences.</p>
<dl class="class">
<dt id="cam.sgnmt.io.BPE">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">BPE</code><span class="sig-paren">(</span><em>codes_path</em>, <em>separator='&#64;&#64;'</em>, <em>remove_eow=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="cam.sgnmt.io.BPE.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>orig</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode word based on list of BPE merge operations, which are applied consecutively</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.io.BPE.get_pairs">
<code class="descname">get_pairs</code><span class="sig-paren">(</span><em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE.get_pairs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE.get_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return set of symbol pairs in a word.</p>
<p>word is represented as tuple of symbols (symbols being variable-length strings)</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.io.BPE.process_line">
<code class="descname">process_line</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE.process_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE.process_line" title="Permalink to this definition">¶</a></dt>
<dd><p>segment line, dealing with leading and trailing whitespace</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.io.BPE.segment">
<code class="descname">segment</code><span class="sig-paren">(</span><em>sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE.segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE.segment" title="Permalink to this definition">¶</a></dt>
<dd><p>segment single sentence (whitespace-tokenized string) with BPE encoding</p>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.io.BPE.segment_tokens">
<code class="descname">segment_tokens</code><span class="sig-paren">(</span><em>tokens</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPE.segment_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPE.segment_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>segment a sequence of tokens with BPE encoding</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.BPEAtAtDecoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">BPEAtAtDecoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEAtAtDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEAtAtDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Decoder</span></code></a></p>
<p>&#8220;Decoder for BPE mapping with &#64;&#64; separator.</p>
<dl class="method">
<dt id="cam.sgnmt.io.BPEAtAtDecoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEAtAtDecoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEAtAtDecoder.decode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.BPEDecoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">BPEDecoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Decoder</span></code></a></p>
<p>&#8220;Decoder for BPE mapping SGNMT style.</p>
<dl class="method">
<dt id="cam.sgnmt.io.BPEDecoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEDecoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEDecoder.decode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.BPEEncoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">BPEEncoder</code><span class="sig-paren">(</span><em>codes_path</em>, <em>separator=''</em>, <em>remove_eow=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Encoder" title="cam.sgnmt.io.Encoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Encoder</span></code></a></p>
<p>Encoder for BPE mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.BPEEncoder.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#BPEEncoder.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.BPEEncoder.encode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.CharDecoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">CharDecoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#CharDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.CharDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Decoder</span></code></a></p>
<p>&#8220;Decoder for char mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.CharDecoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#CharDecoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.CharDecoder.decode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.CharEncoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">CharEncoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#CharEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.CharEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Encoder" title="cam.sgnmt.io.Encoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Encoder</span></code></a></p>
<p>Encoder for char mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.CharEncoder.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#CharEncoder.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.CharEncoder.encode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.Decoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">Decoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#Decoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.Decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>&#8220;Super class for IO decoders.</p>
<dl class="method">
<dt id="cam.sgnmt.io.Decoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#Decoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.Decoder.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the target sentence represented as sequence of token
IDs to a string representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trg_sentence</strong> (<em>list</em>) &#8211; A sequence of integers (token IDs)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">string.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.Encoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">Encoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#Encoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.Encoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Super class for IO encoders.</p>
<dl class="method">
<dt id="cam.sgnmt.io.Encoder.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#Encoder.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.Encoder.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the source sentence in string representation to a
sequence of token IDs. Depending on the configuration of this
module, it applies word maps and/or subword/character segmentation
on the input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>src_sentence</strong> (<em>string</em>) &#8211; A single input sentence</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of integers.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.IDDecoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">IDDecoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#IDDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.IDDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Decoder</span></code></a></p>
<p>&#8220;Decoder for ID mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.IDDecoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#IDDecoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.IDDecoder.decode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.IDEncoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">IDEncoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#IDEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.IDEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Encoder" title="cam.sgnmt.io.Encoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Encoder</span></code></a></p>
<p>Encoder for ID mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.IDEncoder.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#IDEncoder.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.IDEncoder.encode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.WordDecoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">WordDecoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#WordDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.WordDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Decoder" title="cam.sgnmt.io.Decoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Decoder</span></code></a></p>
<p>&#8220;Decoder for word based mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.WordDecoder.decode">
<code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#WordDecoder.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.WordDecoder.decode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.io.WordEncoder">
<em class="property">class </em><code class="descclassname">cam.sgnmt.io.</code><code class="descname">WordEncoder</code><a class="reference internal" href="_modules/cam/sgnmt/io.html#WordEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.WordEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.io.Encoder" title="cam.sgnmt.io.Encoder"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.io.Encoder</span></code></a></p>
<p>Encoder for word based mapping.</p>
<dl class="method">
<dt id="cam.sgnmt.io.WordEncoder.encode">
<code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#WordEncoder.encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.WordEncoder.encode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.io.decode">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">decode</code><span class="sig-paren">(</span><em>trg_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the target sentence represented as sequence of token
IDs to a string representation. This method calls
<code class="docutils literal"><span class="pre">decoder.decode()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trg_sentence</strong> (<em>list</em>) &#8211; A sequence of integers (token IDs)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">string.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.io.decoder">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">decoder</code><em class="property"> = None</em><a class="headerlink" href="#cam.sgnmt.io.decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Decoder called in decode(). Initialized in initialize().</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.io.encode">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">encode</code><span class="sig-paren">(</span><em>src_sentence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the source sentence in string representation to a
sequence of token IDs. Depending on the configuration of this
module, it applies word maps and/or subword/character segmentation
on the input. This method calls <code class="docutils literal"><span class="pre">encoder.encode()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>src_sentence</strong> (<em>string</em>) &#8211; A single input sentence</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of integers.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.io.encoder">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">encoder</code><em class="property"> = None</em><a class="headerlink" href="#cam.sgnmt.io.encoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Encoder called in encode(). Initialized in initialize().</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.io.initialize">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">initialize</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the <code class="docutils literal"><span class="pre">io</span></code> module, including loading word maps and
other resources needed for encoding and decoding. Subsequent calls
of <code class="docutils literal"><span class="pre">encode()</span></code> and <code class="docutils literal"><span class="pre">decode()</span></code> will process input as specified in
<code class="docutils literal"><span class="pre">args</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>object</em>) &#8211; SGNMT config</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.io.load_src_wmap">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">load_src_wmap</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#load_src_wmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.load_src_wmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a source side word map from the file system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) &#8211; Path to the word map (Format: word id)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">word, value: id)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict. Source word map (key</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.io.load_trg_wmap">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">load_trg_wmap</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/io.html#load_trg_wmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.io.load_trg_wmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a target side word map from the file system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) &#8211; Path to the word map (Format: word id)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">id, value: word)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict. Source word map (key</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.io.src_wmap">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">src_wmap</code><em class="property"> = {}</em><a class="headerlink" href="#cam.sgnmt.io.src_wmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Source language word map (word -&gt; id)</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.io.trg_wmap">
<code class="descclassname">cam.sgnmt.io.</code><code class="descname">trg_wmap</code><em class="property"> = {}</em><a class="headerlink" href="#cam.sgnmt.io.trg_wmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Target language word map (id -&gt; word)</p>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.output">
<span id="cam-sgnmt-output-module"></span><h2>cam.sgnmt.output module<a class="headerlink" href="#module-cam.sgnmt.output" title="Permalink to this headline">¶</a></h2>
<p>This module contains the output handlers. These handlers create
output files from the n-best lists generated by the <code class="docutils literal"><span class="pre">Decoder</span></code>. They
can be activated via &#8211;outputs.</p>
<p>This module depends on OpenFST to write FST files in binary format. To
enable Python support in OpenFST, use a recent version (&gt;=1.5.4) and
compile with <code class="docutils literal"><span class="pre">--enable_python</span></code>. Further information can be found here:</p>
<p><a class="reference external" href="http://www.openfst.org/twiki/bin/view/FST/PythonExtension">http://www.openfst.org/twiki/bin/view/FST/PythonExtension</a></p>
<dl class="class">
<dt id="cam.sgnmt.output.FSTOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">FSTOutputHandler</code><span class="sig-paren">(</span><em>path</em>, <em>unk_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#FSTOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.FSTOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>This output handler creates FSTs with with sparse tuple arcs
from the n-best lists from the decoder. The predictor scores are
kept separately in the sparse tuples. Note that this means that
the parameter <code class="docutils literal"><span class="pre">--combination_scheme</span></code> might not be visible in the
lattices because predictor scores are not combined. The order in
the sparse tuples corresponds to the order of the predictors in
the <code class="docutils literal"><span class="pre">--predictors</span></code> argument.</p>
<p>Note that the created FSTs use another ID for UNK to avoid
confusion with the epsilon symbol used by OpenFST.</p>
<p>Creates a sparse tuple FST output handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) &#8211; Path to the VECLAT directory to create</li>
<li><strong>unk_id</strong> (<em>int</em>) &#8211; Id which should be used in the FST for UNK</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="cam.sgnmt.output.FSTOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#FSTOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.FSTOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes FST files with sparse tuples for each sentence in
<code class="docutils literal"><span class="pre">all_hypos</span></code>. The created lattices are not optimized in any
way: We create a distinct path for each entry in
<code class="docutils literal"><span class="pre">all_hypos</span></code>. We advise you to determinize/minimize them if
you are planning to use them for further processing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_hypos</strong> (<em>list</em>) &#8211; list of nbest lists of hypotheses</li>
<li><strong>sen_indices</strong> (<em>list</em>) &#8211; List of sentence indices (0-indexed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>OSError. If the directory could not be created</li>
<li>IOError. If something goes wrong while writing to the disk</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.output.FSTOutputHandler.write_weight">
<code class="descname">write_weight</code><span class="sig-paren">(</span><em>score_breakdown</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#FSTOutputHandler.write_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.FSTOutputHandler.write_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to create the weight string</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.NBestOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">NBestOutputHandler</code><span class="sig-paren">(</span><em>path</em>, <em>predictor_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#NBestOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.NBestOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>Produces a n-best file in Moses format. The third part of each
entry is used to store the separated unnormalized predictor scores.
Note that the sentence IDs are shifted: Moses n-best files start
with the index 0, but in SGNMT and HiFST we usually refer to the
first sentence with 1 (e.g. in lattice directories or &#8211;range)</p>
<p>Creates a Moses n-best list output handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) &#8211; Path to the n-best file to write</li>
<li><strong>predictor_names</strong> &#8211; Names of the predictors whose scores
should be included in the score breakdown
in the n-best list</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="cam.sgnmt.output.NBestOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#NBestOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.NBestOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the hypotheses in <code class="docutils literal"><span class="pre">all_hypos</span></code> to <code class="docutils literal"><span class="pre">path</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.NgramOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">NgramOutputHandler</code><span class="sig-paren">(</span><em>path</em>, <em>min_order</em>, <em>max_order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#NgramOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.NgramOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>This output handler extracts MBR-style ngram posteriors from the
hypotheses returned by the decoder. The hypothesis scores are assumed to
be loglikelihoods, which we renormalize to make sure that we operate on a
valid distribution. The scores produced by the output handler are
probabilities of an ngram being in the translation.</p>
<p>Creates an ngram output handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) &#8211; Path to the ngram directory to create</li>
<li><strong>min_order</strong> (<em>int</em>) &#8211; Minimum order of extracted ngrams</li>
<li><strong>max_order</strong> (<em>int</em>) &#8211; Maximum order of extracted ngrams</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="cam.sgnmt.output.NgramOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#NgramOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.NgramOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes ngram files for each sentence in <code class="docutils literal"><span class="pre">all_hypos</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_hypos</strong> (<em>list</em>) &#8211; list of nbest lists of hypotheses</li>
<li><strong>sen_indices</strong> (<em>list</em>) &#8211; List of sentence indices (0-indexed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>OSError. If the directory could not be created</li>
<li>IOError. If something goes wrong while writing to the disk</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.OutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">OutputHandler</code><a class="reference internal" href="_modules/cam/sgnmt/output.html#OutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.OutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Interface for output handlers.</p>
<p>Empty constructor</p>
<dl class="method">
<dt id="cam.sgnmt.output.OutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#OutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.OutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes output files to the file system. The
configuration parameters such as output paths should already
have been provided via constructor arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_hypos</strong> (<em>list</em>) &#8211; list of nbest lists of hypotheses</li>
<li><strong>sen_indices</strong> (<em>list</em>) &#8211; List of sentence indices (0-indexed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">IOError. If something goes wrong while writing to the disk</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.StandardFSTOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">StandardFSTOutputHandler</code><span class="sig-paren">(</span><em>path</em>, <em>unk_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#StandardFSTOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.StandardFSTOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>This output handler creates FSTs with standard arcs. In contrast
to <code class="docutils literal"><span class="pre">FSTOutputHandler</span></code>, predictor scores are combined using
<code class="docutils literal"><span class="pre">--combination_scheme</span></code>.</p>
<p>Note that the created FSTs use another ID for UNK to avoid
confusion with the epsilon symbol used by OpenFST.</p>
<p>Creates a standard arc FST output handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) &#8211; Path to the fst directory to create</li>
<li><strong>unk_id</strong> (<em>int</em>) &#8211; Id which should be used in the FST for UNK</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="cam.sgnmt.output.StandardFSTOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#StandardFSTOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.StandardFSTOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes FST files with standard arcs for each
sentence in <code class="docutils literal"><span class="pre">all_hypos</span></code>. The created lattices are not
optimized in any way: We create a distinct path for each entry
in <code class="docutils literal"><span class="pre">all_hypos</span></code>. We advise you to determinize/minimize them if
you are planning to use them for further processing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_hypos</strong> (<em>list</em>) &#8211; list of nbest lists of hypotheses</li>
<li><strong>sen_indices</strong> (<em>list</em>) &#8211; List of sentence indices (0-indexed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>OSError. If the directory could not be created</li>
<li>IOError. If something goes wrong while writing to the disk</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.TextOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">TextOutputHandler</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TextOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TextOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>Writes the first best hypotheses to a plain text file</p>
<p>Creates a plain text output handler to write to <code class="docutils literal"><span class="pre">path</span></code></p>
<dl class="method">
<dt id="cam.sgnmt.output.TextOutputHandler.close_file">
<code class="descname">close_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TextOutputHandler.close_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TextOutputHandler.close_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cam.sgnmt.output.TextOutputHandler.open_file">
<code class="descname">open_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TextOutputHandler.open_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TextOutputHandler.open_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cam.sgnmt.output.TextOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TextOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TextOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the hypotheses in <code class="docutils literal"><span class="pre">all_hypos</span></code> to <code class="docutils literal"><span class="pre">path</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.output.TimeCSVOutputHandler">
<em class="property">class </em><code class="descclassname">cam.sgnmt.output.</code><code class="descname">TimeCSVOutputHandler</code><span class="sig-paren">(</span><em>path</em>, <em>predictor_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TimeCSVOutputHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TimeCSVOutputHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cam.sgnmt.output.OutputHandler" title="cam.sgnmt.output.OutputHandler"><code class="xref py py-class docutils literal"><span class="pre">cam.sgnmt.output.OutputHandler</span></code></a></p>
<p>Produces one CSV file for each sentence. The CSV files contain
the predictor score breakdown for each translation prefix length.</p>
<p>Creates a Moses n-best list output handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>string</em>) &#8211; Path to the n-best file to write</li>
<li><strong>predictor_names</strong> &#8211; Names of the predictors whose scores
should be included in the score breakdown
in the n-best list</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="cam.sgnmt.output.TimeCSVOutputHandler.write_hypos">
<code class="descname">write_hypos</code><span class="sig-paren">(</span><em>all_hypos</em>, <em>sen_indices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#TimeCSVOutputHandler.write_hypos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.TimeCSVOutputHandler.write_hypos" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes ngram files for each sentence in <code class="docutils literal"><span class="pre">all_hypos</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>all_hypos</strong> (<em>list</em>) &#8211; list of nbest lists of hypotheses</li>
<li><strong>sen_indices</strong> (<em>list</em>) &#8211; List of sentence indices (0-indexed)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>OSError. If the directory could not be created</li>
<li>IOError. If something goes wrong while writing to the disk</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.output.write_fst">
<code class="descclassname">cam.sgnmt.output.</code><code class="descname">write_fst</code><span class="sig-paren">(</span><em>f</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/output.html#write_fst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.output.write_fst" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes FST f to the file system after epsilon removal, determinization,
and minimization.</p>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.tf_utils">
<span id="cam-sgnmt-tf-utils-module"></span><h2>cam.sgnmt.tf_utils module<a class="headerlink" href="#module-cam.sgnmt.tf_utils" title="Permalink to this headline">¶</a></h2>
<p>This file contains utility functions for TensorFlow such as
session handling and checkpoint loading.</p>
<dl class="function">
<dt id="cam.sgnmt.tf_utils.create_session">
<code class="descclassname">cam.sgnmt.tf_utils.</code><code class="descname">create_session</code><span class="sig-paren">(</span><em>checkpoint_path</em>, <em>n_cpu_threads=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/tf_utils.html#create_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.tf_utils.create_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a MonitoredSession.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>checkpoint_path</strong> (<em>string</em>) &#8211; Path either to checkpoint directory or
directly to a checkpoint file.</li>
<li><strong>n_cpu_threads</strong> (<em>int</em>) &#8211; Number of CPU threads. If negative, we
assume either GPU decoding or that all
CPU cores can be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A TensorFlow MonitoredSession.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.tf_utils.session_config">
<code class="descclassname">cam.sgnmt.tf_utils.</code><code class="descname">session_config</code><span class="sig-paren">(</span><em>n_cpu_threads=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/tf_utils.html#session_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.tf_utils.session_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the session config with default parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n_cpu_threads</strong> (<em>int</em>) &#8211; Number of CPU threads. If negative, we
assume either GPU decoding or that all
CPU cores can be used.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A TF session config object.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.ui">
<span id="cam-sgnmt-ui-module"></span><h2>cam.sgnmt.ui module<a class="headerlink" href="#module-cam.sgnmt.ui" title="Permalink to this headline">¶</a></h2>
<p>This module handles the user interface and contains subroutines
for parsing and verifying config files and command line arguments.</p>
<dl class="function">
<dt id="cam.sgnmt.ui.get_args">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">get_args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#get_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.get_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the arguments for the current SGNMT run from both command
line arguments and configuration files. This method contains all
available SGNMT options, i.e. configuration is not encapsulated e.g.
by predictors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">object. Arguments object like for <code class="docutils literal"><span class="pre">ArgumentParser</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.get_parser">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.get_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parser object which is used to build the configuration
argument <code class="docutils literal"><span class="pre">args</span></code>. This is a helper method for <code class="docutils literal"><span class="pre">get_args()</span></code>
TODO: Decentralize configuration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">ArgumentParser. The pre-filled parser object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.parse_args">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">parse_args</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#parse_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://codereview.stackexchange.com/questions/79008/parse-a-config-file">http://codereview.stackexchange.com/questions/79008/parse-a-config-file</a>-
and-add-to-command-line-arguments-using-argparse-in-python</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.parse_param_string">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">parse_param_string</code><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#parse_param_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.parse_param_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a parameter string such as &#8216;param1=x,param2=y&#8217;. Loads
config files if specified in the string. If <code class="docutils literal"><span class="pre">param</span></code> points to a
file, load this file with YAML.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.run_diagnostics">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">run_diagnostics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#run_diagnostics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.run_diagnostics" title="Permalink to this definition">¶</a></dt>
<dd><p>Check availability of external libraries.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.str2bool">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">str2bool</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#str2bool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.str2bool" title="Permalink to this definition">¶</a></dt>
<dd><p>For making the <code class="docutils literal"><span class="pre">ArgumentParser</span></code> understand boolean values</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.ui.validate_args">
<code class="descclassname">cam.sgnmt.ui.</code><code class="descname">validate_args</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/ui.html#validate_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.ui.validate_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Some rudimentary sanity checks for configuration options.
This method directly prints help messages to the user. In case of fatal
errors, it terminates using <code class="docutils literal"><span class="pre">logging.fatal()</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>object</em>) &#8211; Configuration as returned by <code class="docutils literal"><span class="pre">get_args</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt.utils">
<span id="cam-sgnmt-utils-module"></span><h2>cam.sgnmt.utils module<a class="headerlink" href="#module-cam.sgnmt.utils" title="Permalink to this headline">¶</a></h2>
<p>This file contains common basic functionality which can be used from
anywhere. This includes the definition of reserved word indices, some
mathematical functions, and helper functions to deal with the small
quirks Python sometimes has.</p>
<dl class="data">
<dt id="cam.sgnmt.utils.EOS_ID">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">EOS_ID</code><em class="property"> = 2</em><a class="headerlink" href="#cam.sgnmt.utils.EOS_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved word ID for the end-of-sentence symbol.</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.GO_ID">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">GO_ID</code><em class="property"> = 1</em><a class="headerlink" href="#cam.sgnmt.utils.GO_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved word ID for the start-of-sentence symbol.</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.MESSAGE_TYPE_DEFAULT">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">MESSAGE_TYPE_DEFAULT</code><em class="property"> = 1</em><a class="headerlink" href="#cam.sgnmt.utils.MESSAGE_TYPE_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Default message type for observer messages</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.MESSAGE_TYPE_FULL_HYPO">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">MESSAGE_TYPE_FULL_HYPO</code><em class="property"> = 3</em><a class="headerlink" href="#cam.sgnmt.utils.MESSAGE_TYPE_FULL_HYPO" title="Permalink to this definition">¶</a></dt>
<dd><p>This message type is used by the decoder when a new complete
hypothesis was found. Note that this is not necessarily the best hypo
so far, it is just the latest hypo found which ends with EOS.</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.MESSAGE_TYPE_POSTERIOR">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">MESSAGE_TYPE_POSTERIOR</code><em class="property"> = 2</em><a class="headerlink" href="#cam.sgnmt.utils.MESSAGE_TYPE_POSTERIOR" title="Permalink to this definition">¶</a></dt>
<dd><p>This message is sent by the decoder after <code class="docutils literal"><span class="pre">apply_predictors</span></code> was
called. The message includes the new posterior distribution and the
score breakdown.</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.NOTAPPLICABLE_ID">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">NOTAPPLICABLE_ID</code><em class="property"> = 3</em><a class="headerlink" href="#cam.sgnmt.utils.NOTAPPLICABLE_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved word ID which is currently not used.</p>
</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.utils.Observable">
<em class="property">class </em><code class="descclassname">cam.sgnmt.utils.</code><code class="descname">Observable</code><a class="reference internal" href="_modules/cam/sgnmt/utils.html#Observable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.Observable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>For the GoF design pattern observer</p>
<p>Initializes the list of observers with an empty list</p>
<dl class="method">
<dt id="cam.sgnmt.utils.Observable.add_observer">
<code class="descname">add_observer</code><span class="sig-paren">(</span><em>observer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#Observable.add_observer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.Observable.add_observer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new observer which is notified when this class fires
a notification</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>observer</strong> (<a class="reference internal" href="#cam.sgnmt.utils.Observer" title="cam.sgnmt.utils.Observer"><em>Observer</em></a>) &#8211; the observer class to add</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cam.sgnmt.utils.Observable.notify_observers">
<code class="descname">notify_observers</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#Observable.notify_observers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.Observable.notify_observers" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the given message to all registered observers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>object</em>) &#8211; The message to send</li>
<li><strong>message_type</strong> (<em>int</em>) &#8211; The type of the message. One of the
<code class="docutils literal"><span class="pre">MESSAGE_TYPE_*</span></code> variables</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cam.sgnmt.utils.Observer">
<em class="property">class </em><code class="descclassname">cam.sgnmt.utils.</code><code class="descname">Observer</code><a class="reference internal" href="_modules/cam/sgnmt/utils.html#Observer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.Observer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Super class for classes which observe (GoF design patten) other
classes.</p>
<dl class="method">
<dt id="cam.sgnmt.utils.Observer.notify">
<code class="descname">notify</code><span class="sig-paren">(</span><em>message</em>, <em>message_type=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#Observer.notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.Observer.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a notification from an observed object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>object</em>) &#8211; the message sent by observed object</li>
<li><strong>message_type</strong> (<em>int</em>) &#8211; The type of the message. One of the
<code class="docutils literal"><span class="pre">MESSAGE_TYPE_*</span></code> variables</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.TMP_FILENAME">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">TMP_FILENAME</code><em class="property"> = '/tmp/sgnmt.32253.fst'</em><a class="headerlink" href="#cam.sgnmt.utils.TMP_FILENAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporary file name to use if an FST file is zipped.</p>
</dd></dl>

<dl class="data">
<dt id="cam.sgnmt.utils.UNK_ID">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">UNK_ID</code><em class="property"> = 0</em><a class="headerlink" href="#cam.sgnmt.utils.UNK_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved word ID for the unknown word (UNK).</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.argmax">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">argmax</code><span class="sig-paren">(</span><em>arr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#argmax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.argmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the index of the maximum entry in <code class="docutils literal"><span class="pre">arr</span></code>. The parameter can
be a dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>arr</strong> (<em>list,array,dict</em>) &#8211; Set of numerical values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Index or key of the maximum entry in <code class="docutils literal"><span class="pre">arr</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.argmax_n">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">argmax_n</code><span class="sig-paren">(</span><em>arr</em>, <em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#argmax_n"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.argmax_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Get indices of the <code class="docutils literal"><span class="pre">n</span></code> maximum entries in <code class="docutils literal"><span class="pre">arr</span></code>. The
parameter <code class="docutils literal"><span class="pre">arr</span></code> can be a dictionary. The returned index set is
not guaranteed to be sorted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>arr</strong> (<em>list,array,dict</em>) &#8211; Set of numerical values</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of values to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of indices or keys of the <code class="docutils literal"><span class="pre">n</span></code> maximum entries in <code class="docutils literal"><span class="pre">arr</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.common_contains">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">common_contains</code><span class="sig-paren">(</span><em>obj</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#common_contains"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.common_contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the existence of a key or index in a mapping.
Works with numpy arrays, lists, and dicts.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>list,array,dict</em>) &#8211; Mapping</li>
<li><strong>key</strong> (<em>int</em>) &#8211; Index or key of the element to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">True</span></code> if <code class="docutils literal"><span class="pre">key</span></code> in <code class="docutils literal"><span class="pre">obj</span></code>, otherwise <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.common_get">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">common_get</code><span class="sig-paren">(</span><em>obj</em>, <em>key</em>, <em>default</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#common_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.common_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used to access an element via the index or key.
Works with numpy arrays, lists, and dicts.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>list,array,dict</em>) &#8211; Mapping</li>
<li><strong>key</strong> (<em>int</em>) &#8211; Index or key of the element to retrieve</li>
<li><strong>default</strong> (<em>object</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">obj[key]</span></code> if <code class="docutils literal"><span class="pre">key</span></code> in <code class="docutils literal"><span class="pre">obj</span></code>, otherwise <code class="docutils literal"><span class="pre">default</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.common_iterable">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">common_iterable</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#common_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.common_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used to iterate over the key-value pairs of a mapping.
Works with numpy arrays, lists, and dicts. Code taken from
<a class="reference external" href="http://stackoverflow.com/questions/12325608/iterate-over-a-dict-or-list-in-python">http://stackoverflow.com/questions/12325608/iterate-over-a-dict-or-list-in-python</a></p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.common_viewkeys">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">common_viewkeys</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#common_viewkeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.common_viewkeys" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used to iterate over the keys or indices of a mapping.
Works with numpy arrays, lists, and dicts. Code taken from
<a class="reference external" href="http://stackoverflow.com/questions/12325608/iterate-over-a-dict-or-list-in-python">http://stackoverflow.com/questions/12325608/iterate-over-a-dict-or-list-in-python</a></p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.get_path">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">get_path</code><span class="sig-paren">(</span><em>tmpl</em>, <em>sub=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#get_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces the %d placeholder in <code class="docutils literal"><span class="pre">tmpl</span></code> with <code class="docutils literal"><span class="pre">sub</span></code>. If <code class="docutils literal"><span class="pre">tmpl</span></code>
does not contain %d, return <code class="docutils literal"><span class="pre">tmpl</span></code> unmodified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tmpl</strong> (<em>string</em>) &#8211; Path, potentially with %d placeholder</li>
<li><strong>sub</strong> (<em>int</em>) &#8211; Substitution for %d</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">string. <code class="docutils literal"><span class="pre">tmpl</span></code> with %d replaced with <code class="docutils literal"><span class="pre">sub</span></code> if present</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.load_fst">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">load_fst</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#load_fst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.load_fst" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a FST from the file system using PyFSTs <code class="docutils literal"><span class="pre">read()</span></code> method.
GZipped format is also supported. The arc type must be standard
or log, otherwise PyFST cannot load them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>string</em>) &#8211; Path to the FST file to load</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">fst. PyFST FST object or <code class="docutils literal"><span class="pre">None</span></code> if FST could not be read</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.log_sum">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">log_sum</code><span class="sig-paren">(</span><em>vals</em><span class="sig-paren">)</span><a class="headerlink" href="#cam.sgnmt.utils.log_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines which log summation function to use.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.log_sum_log_semiring">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">log_sum_log_semiring</code><span class="sig-paren">(</span><em>vals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#log_sum_log_semiring"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.log_sum_log_semiring" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the <code class="docutils literal"><span class="pre">logsumexp</span></code> function in scipy to calculate the log of
the sum of a set of log values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vals</strong> (<em>set</em>) &#8211; List or set of numerical values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.log_sum_tropical_semiring">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">log_sum_tropical_semiring</code><span class="sig-paren">(</span><em>vals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#log_sum_tropical_semiring"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.log_sum_tropical_semiring" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximates summation in log space with the max.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vals</strong> (<em>set</em>) &#8211; List or set of numerical values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.oov_to_unk">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">oov_to_unk</code><span class="sig-paren">(</span><em>seq</em>, <em>vocab_size</em>, <em>unk_idx=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#oov_to_unk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.oov_to_unk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.split_comma">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">split_comma</code><span class="sig-paren">(</span><em>s</em>, <em>func=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#split_comma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.split_comma" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a string at commas and removes blanks.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.switch_to_fairseq_indexing">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">switch_to_fairseq_indexing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#switch_to_fairseq_indexing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.switch_to_fairseq_indexing" title="Permalink to this definition">¶</a></dt>
<dd><p>Calling this method overrides the global definitions of the
reserved  word ids <code class="docutils literal"><span class="pre">GO_ID</span></code>, <code class="docutils literal"><span class="pre">EOS_ID</span></code>, and <code class="docutils literal"><span class="pre">UNK_ID</span></code>
with the fairseq indexing scheme.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.switch_to_t2t_indexing">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">switch_to_t2t_indexing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#switch_to_t2t_indexing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.switch_to_t2t_indexing" title="Permalink to this definition">¶</a></dt>
<dd><p>Calling this method overrides the global definitions of the
reserved  word ids <code class="docutils literal"><span class="pre">GO_ID</span></code>, <code class="docutils literal"><span class="pre">EOS_ID</span></code>, and <code class="docutils literal"><span class="pre">UNK_ID</span></code>
with the tensor2tensor indexing scheme. This scheme is used in all
t2t models.</p>
</dd></dl>

<dl class="function">
<dt id="cam.sgnmt.utils.w2f">
<code class="descclassname">cam.sgnmt.utils.</code><code class="descname">w2f</code><span class="sig-paren">(</span><em>fstweight</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cam/sgnmt/utils.html#w2f"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cam.sgnmt.utils.w2f" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an arc weight to float</p>
</dd></dl>

</div>
<div class="section" id="module-cam.sgnmt">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cam.sgnmt" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cam.sgnmt.decoding.html" class="btn btn-neutral float-right" title="cam.sgnmt.decoding package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="publications.html" class="btn btn-neutral" title="Publications" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, University of Cambridge.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>