

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command-line reference &mdash; SGNMT 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="SGNMT 0.1 documentation" href="index.html"/>
        <link rel="next" title="Predictors" href="predictors.html"/>
        <link rel="prev" title="Tutorial" href="tutorial.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SGNMT
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command-line reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#decoding">Decoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#training">Training</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="predictors.html">Predictors</a></li>
<li class="toctree-l1"><a class="reference internal" href="decoders.html">Decoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="cam.sgnmt.html">All modules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SGNMT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Command-line reference</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/command_line.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-reference">
<h1>Command-line reference<a class="headerlink" href="#command-line-reference" title="Permalink to this headline">¶</a></h1>
<p>SGNMT provides <code class="docutils literal"><span class="pre">decode.py</span></code> for decoding and <code class="docutils literal"><span class="pre">train.py</span></code> for NMT training. Both
scripts can be configured via command line or configuration file. For a quick
overview of available parameters use <code class="docutils literal"><span class="pre">--help</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">decode</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
<span class="n">python</span> <span class="n">train</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The complete and detailed list of parameters is provided below.</p>
<div class="section" id="decoding">
<h2>Decoding<a class="headerlink" href="#decoding" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">decode</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">config_file</span> <span class="n">CONFIG_FILE</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">verbosity</span> <span class="p">{</span><span class="n">debug</span><span class="p">,</span><span class="n">info</span><span class="p">,</span><span class="n">warn</span><span class="p">,</span><span class="n">error</span><span class="p">}]</span> <span class="p">[</span><span class="o">--</span><span class="n">min_score</span> <span class="n">MIN_SCORE</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="nb">range</span> <span class="n">RANGE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_test</span> <span class="n">SRC_TEST</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">en_test</span> <span class="n">EN_TEST</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">legacy_indexing</span> <span class="n">LEGACY_INDEXING</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">input_method</span> <span class="p">{</span><span class="n">file</span><span class="p">,</span><span class="n">shell</span><span class="p">,</span><span class="n">stdin</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">log_sum</span> <span class="p">{</span><span class="n">tropical</span><span class="p">,</span><span class="n">log</span><span class="p">}]</span> <span class="p">[</span><span class="o">--</span><span class="n">beam</span> <span class="n">BEAM</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">decoder</span> <span class="p">{</span><span class="n">greedy</span><span class="p">,</span><span class="n">beam</span><span class="p">,</span><span class="n">dfs</span><span class="p">,</span><span class="n">restarting</span><span class="p">,</span><span class="n">astar</span><span class="p">,</span><span class="n">vanilla</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">max_node_expansions</span> <span class="n">MAX_NODE_EXPANSIONS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">early_stopping</span> <span class="n">EARLY_STOPPING</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">nbest</span> <span class="n">NBEST</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">output_fst_unk_id</span> <span class="n">OUTPUT_FST_UNK_ID</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">output_path</span> <span class="n">OUTPUT_PATH</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">outputs</span> <span class="n">OUTPUTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">remove_eos</span> <span class="n">REMOVE_EOS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">heuristics</span> <span class="n">HEURISTICS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">heuristic_predictors</span> <span class="n">HEURISTIC_PREDICTORS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">cache_heuristic_estimates</span> <span class="n">CACHE_HEURISTIC_ESTIMATES</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">predictors</span> <span class="n">PREDICTORS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">predictor_weights</span> <span class="n">PREDICTOR_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">closed_vocabulary_normalization</span> <span class="p">{</span><span class="n">none</span><span class="p">,</span><span class="n">exact</span><span class="p">,</span><span class="n">reduced</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">combination_scheme</span> <span class="p">{</span><span class="nb">sum</span><span class="p">,</span><span class="n">length_norm</span><span class="p">,</span><span class="n">bayesian</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">apply_combination_scheme_to_partial_hypos</span> <span class="n">APPLY_COMBINATION_SCHEME_TO_PARTIAL_HYPOS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">proto</span> <span class="n">PROTO</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">length_normalization</span> <span class="n">LENGTH_NORMALIZATION</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_model_selector</span> <span class="p">{</span><span class="n">params</span><span class="p">,</span><span class="n">bleu</span><span class="p">,</span><span class="n">time</span><span class="p">}]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">cache_nmt_posteriors</span> <span class="n">CACHE_NMT_POSTERIORS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">src_test_raw</span> <span class="n">SRC_TEST_RAW</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">length_model_weights</span> <span class="n">LENGTH_MODEL_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">use_length_point_probs</span> <span class="n">USE_LENGTH_POINT_PROBS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_test</span> <span class="n">TRG_TEST</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fr_test</span> <span class="n">FR_TEST</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat</span> <span class="n">FORCEDLST_SPARSE_FEAT</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">use_nbest_weights</span> <span class="n">USE_NBEST_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap</span> <span class="n">SRC_IDXMAP</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">en_idxmap</span> <span class="n">EN_IDXMAP</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap</span> <span class="n">TRG_IDXMAP</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fr_idxmap</span> <span class="n">FR_IDXMAP</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">rules_path</span> <span class="n">RULES_PATH</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">use_grammar_weights</span> <span class="n">USE_GRAMMAR_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">grammar_feature_weights</span> <span class="n">GRAMMAR_FEATURE_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">srilm_path</span> <span class="n">SRILM_PATH</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">nplm_path</span> <span class="n">NPLM_PATH</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">srilm_order</span> <span class="n">SRILM_ORDER</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">normalize_nplm_probs</span> <span class="n">NORMALIZE_NPLM_PROBS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">fst_path</span> <span class="n">FST_PATH</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">rtn_path</span> <span class="n">RTN_PATH</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">add_fst_bos_to_eos_weight</span> <span class="n">ADD_FST_BOS_TO_EOS_WEIGHT</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">fst_to_log</span> <span class="n">FST_TO_LOG</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use_fst_weights</span> <span class="n">USE_FST_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">use_rtn_weights</span> <span class="n">USE_RTN_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">minimize_rtns</span> <span class="n">MINIMIZE_RTNS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">remove_epsilon_in_rtns</span> <span class="n">REMOVE_EPSILON_IN_RTNS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">normalize_fst_weights</span> <span class="n">NORMALIZE_FST_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">normalize_rtn_weights</span> <span class="n">NORMALIZE_RTN_WEIGHTS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config2</span> <span class="n">NMT_CONFIG2</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap2</span> <span class="n">SRC_IDXMAP2</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap2</span> <span class="n">TRG_IDXMAP2</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path2</span> <span class="n">FST_PATH2</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat2</span> <span class="n">FORCEDLST_SPARSE_FEAT2</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config3</span> <span class="n">NMT_CONFIG3</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap3</span> <span class="n">SRC_IDXMAP3</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap3</span> <span class="n">TRG_IDXMAP3</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path3</span> <span class="n">FST_PATH3</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat3</span> <span class="n">FORCEDLST_SPARSE_FEAT3</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config4</span> <span class="n">NMT_CONFIG4</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap4</span> <span class="n">SRC_IDXMAP4</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap4</span> <span class="n">TRG_IDXMAP4</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path4</span> <span class="n">FST_PATH4</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat4</span> <span class="n">FORCEDLST_SPARSE_FEAT4</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config5</span> <span class="n">NMT_CONFIG5</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap5</span> <span class="n">SRC_IDXMAP5</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap5</span> <span class="n">TRG_IDXMAP5</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path5</span> <span class="n">FST_PATH5</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat5</span> <span class="n">FORCEDLST_SPARSE_FEAT5</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config6</span> <span class="n">NMT_CONFIG6</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap6</span> <span class="n">SRC_IDXMAP6</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap6</span> <span class="n">TRG_IDXMAP6</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path6</span> <span class="n">FST_PATH6</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat6</span> <span class="n">FORCEDLST_SPARSE_FEAT6</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config7</span> <span class="n">NMT_CONFIG7</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap7</span> <span class="n">SRC_IDXMAP7</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap7</span> <span class="n">TRG_IDXMAP7</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path7</span> <span class="n">FST_PATH7</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat7</span> <span class="n">FORCEDLST_SPARSE_FEAT7</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config8</span> <span class="n">NMT_CONFIG8</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap8</span> <span class="n">SRC_IDXMAP8</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap8</span> <span class="n">TRG_IDXMAP8</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path8</span> <span class="n">FST_PATH8</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat8</span> <span class="n">FORCEDLST_SPARSE_FEAT8</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config9</span> <span class="n">NMT_CONFIG9</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap9</span> <span class="n">SRC_IDXMAP9</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap9</span> <span class="n">TRG_IDXMAP9</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path9</span> <span class="n">FST_PATH9</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat9</span> <span class="n">FORCEDLST_SPARSE_FEAT9</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config10</span> <span class="n">NMT_CONFIG10</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap10</span> <span class="n">SRC_IDXMAP10</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap10</span> <span class="n">TRG_IDXMAP10</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path10</span> <span class="n">FST_PATH10</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat10</span> <span class="n">FORCEDLST_SPARSE_FEAT10</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config11</span> <span class="n">NMT_CONFIG11</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap11</span> <span class="n">SRC_IDXMAP11</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap11</span> <span class="n">TRG_IDXMAP11</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path11</span> <span class="n">FST_PATH11</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat11</span> <span class="n">FORCEDLST_SPARSE_FEAT11</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">nmt_config12</span> <span class="n">NMT_CONFIG12</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_idxmap12</span> <span class="n">SRC_IDXMAP12</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">trg_idxmap12</span> <span class="n">TRG_IDXMAP12</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fst_path12</span> <span class="n">FST_PATH12</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">forcedlst_sparse_feat12</span> <span class="n">FORCEDLST_SPARSE_FEAT12</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">enc_nhids</span> <span class="n">ENC_NHIDS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">stream</span> <span class="n">STREAM</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">store_full_main_loop</span> <span class="n">STORE_FULL_MAIN_LOOP</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">weight_scale</span> <span class="n">WEIGHT_SCALE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">eos_token</span> <span class="n">EOS_TOKEN</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">sort_k_batches</span> <span class="n">SORT_K_BATCHES</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_set</span> <span class="n">VAL_SET</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">weight_noise_rec</span> <span class="n">WEIGHT_NOISE_REC</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">src_vocab_size</span> <span class="n">SRC_VOCAB_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">save_freq</span> <span class="n">SAVE_FREQ</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">fix_embeddings</span> <span class="n">FIX_EMBEDDINGS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_set_out</span> <span class="n">VAL_SET_OUT</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">enc_embed</span> <span class="n">ENC_EMBED</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dec_nhids</span> <span class="n">DEC_NHIDS</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">finish_after</span> <span class="n">FINISH_AFTER</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">unk_token</span> <span class="n">UNK_TOKEN</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">saveto</span> <span class="n">SAVETO</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trg_data</span> <span class="n">TRG_DATA</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">step_clipping</span> <span class="n">STEP_CLIPPING</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dropout</span> <span class="n">DROPOUT</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">unk_id</span> <span class="n">UNK_ID</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_burn_in</span> <span class="n">VAL_BURN_IN</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">step_rule</span> <span class="n">STEP_RULE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trg_vocab_size</span> <span class="n">TRG_VOCAB_SIZE</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">batch_size</span> <span class="n">BATCH_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">bleu_val_freq</span> <span class="n">BLEU_VAL_FREQ</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">output_val_set</span> <span class="n">OUTPUT_VAL_SET</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">weight_noise_ff</span> <span class="n">WEIGHT_NOISE_FF</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_data</span> <span class="n">SRC_DATA</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">val_set_grndtruth</span> <span class="n">VAL_SET_GRNDTRUTH</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">hook_samples</span> <span class="n">HOOK_SAMPLES</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">bos_token</span> <span class="n">BOS_TOKEN</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">sampling_freq</span> <span class="n">SAMPLING_FREQ</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">reload</span> <span class="n">RELOAD</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">beam_size</span> <span class="n">BEAM_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dec_embed</span> <span class="n">DEC_EMBED</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">bleu_script</span> <span class="n">BLEU_SCRIPT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">seq_len</span> <span class="n">SEQ_LEN</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">--</span><span class="n">normalized_bleu</span> <span class="n">NORMALIZED_BLEU</span><span class="p">]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>General options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--config_file</span></kbd></td>
<td>Configuration file in standard .ini format. NOTE: Configuration file overrides command line arguments</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--verbosity=info</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">Log level: debug,info,warn,error</p>
<p class="last">Possible choices: debug, info, warn, error</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--min_score=-1000000.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Delete all complete hypotheses with total scores smaller than this value</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--range=</span></kbd></td>
<td>Defines the range of sentences to be processed. Syntax is equal to HiFSTs printstrings and lmerts idxrange parameter: &lt;start-idx&gt;:&lt;end-idx&gt; (both inclusive, start with 1). E.g. 2:5 means: skip the first sentence, process next 4 sentences</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_test=test_en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to source test set. This is expected to be a plain text file with one source sentence in each line. Words need to be indexed, i.e. use word IDs instead of their string representations.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--en_test=</span></kbd></td>
<td>DEPRECATED: Old name for &#8211;src_test</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--legacy_indexing=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Defines the set of reserved word indices. The standard convention is:
0: unk/eps, 1: &lt;s&gt;, 2: &lt;/s&gt;.
Older systems use the TensorFlow scheme:0: pad, 1: &lt;s&gt;, 2: &lt;/s&gt;, 3: unk.
Set this parameter to true to use the old scheme.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--input_method=file</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">This parameter controls how the input to GNMT is provided. GNMT supports three modes:

* &#8216;file&#8217;: Read test sentences from a plain text filespecified by &#8211;src_test.
* &#8216;shell&#8217;: Start GNMT in an interactive shell.
* &#8216;stdin&#8217;: Test sentences are read from stdin

In shell and stdin mode you can change GNMT options on the fly: Beginning a line with the string &#8216;!sgnmt &#8216; signals GNMT directives instead of sentences to translate. E.g. &#8216;!sgnmt config predictor_weights 0.2,0.8&#8217; changes the current predictor weights. &#8216;!sgnmt help&#8217; lists all available directives. Using GNMT directives is particularly useful in combination with MERT to avoid start up times between evaluations. Note that input sentences still have to be written using word ids in all cases.</p>
<p class="last">Possible choices: file, shell, stdin</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--log_sum=log</span></kbd></td>
<td><p class="first">Controls how to compute the sum in the log space, i.e. how to compute log(exp(l1)+exp(l2)) for log values l1,l2.

* &#8216;tropical&#8217;: approximate with max(l1,l2)
* &#8216;log&#8217;: Use logsumexp in scipy</p>
<p class="last">Possible choices: tropical, log</p>
</td></tr>
</tbody>
</table>
</dd>
<dt>Decoding options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--beam=12</span></kbd></td>
<td>Size of beam. Only used if &#8211;decoder is set to &#8216;beam&#8217; or &#8216;astar&#8217;. For &#8216;astar&#8217; it limits the capacity of the queue. Use &#8211;beam 0 for unlimited capacity.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--decoder=beam</span></kbd></td>
<td><p class="first">Strategy for traversing the search space which is spanned by the predictors.

* &#8216;greedy&#8217;: Greedy decoding (similar to beam=1)
* &#8216;beam&#8217;: beam search like in Bahdanau et al, 2015
* &#8216;dfs&#8217;: Depth-first search. This should be used for exact decoding or the complete enumeration of the search space, but it cannot be used if the search space is too large (like for unrestricted NMT) as it performs exhaustive search. If you have not only negative predictor scores, set &#8211;early_stopping to false.
* &#8216;restarting&#8217;: Like DFS but with better admissible pruning behavior.
* &#8216;astar&#8217;: A* search. The heuristic function is configured using the &#8211;heuristics options.
* &#8216;vanilla&#8217;: Original blocks beam decoder. This bypasses the predictor framework and directly performs pure NMT beam decoding on the GPU. Use this when you do pure NMT decoding as this is usually faster then using a single nmt predictor as the search can be parallelized on the GPU.</p>
<p class="last">Possible choices: greedy, beam, dfs, restarting, astar, vanilla</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--max_node_expansions=0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This parameter allows to limit the total number of search space expansions for a single sentence. Currently, this parameter is only supported by the &#8216;dfs&#8217; and &#8216;restarting&#8217; decoder. 1000 is a good value for very gentle pruning, 0 means no limitation</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--early_stopping=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Use this parameter if you are only interested inthe first best decoding result. This option has a different effect depending on the used &#8211;decoder. For the beam decoder, it means stopping decoding when the best active hypothesis ends with &lt;/s&gt;. If false, do not stop until all hypotheses end with EOS. For the dfs and restarting decoders, early stopping enables admissible pruning of branches when the accumulated score already exceeded the currently bestscore. DO NOT USE early stopping in combination with the dfs or restarting decoder when your predictors can produce positive scores!</td></tr>
</tbody>
</table>
</dd>
<dt>Output options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--nbest=0</span></kbd></td>
<td>Maximum number of hypotheses in the output files. Set to 0 to output all hypotheses found by the decoder. If you use the beam or astar decoder, this option is limited by the beam size.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--output_fst_unk_id=999999998</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>SGNMT uses the ID 0 for UNK. However, this clashes with OpenFST when writing FSTs as OpenFST reserves 0 for epsilon arcs. Therefore, we use this ID for UNK instead. Note that this only applies to output FSTs created by the fst or sfst output handler. Apart from that, UNK is still represented by the ID 0.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--output_path=gnmt-out.%s</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to the output files generated by GNMT. You can use the placeholder %%s for the format specifier</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--outputs=</span></kbd></td>
<td>Comma separated list of output formats: 

* &#8216;text&#8217;: First best translations in plain text format
* &#8216;nbest&#8217;: Moses&#8217; n-best format with separate scores for each predictor.
* &#8216;fst&#8217;: Translation lattices in OpenFST format with sparse tuple arcs.
* &#8216;sfst&#8217;: Translation lattices in OpenFST format with standard arcs (i.e. combined scores).

The path to the output files can be specified with &#8211;output_path</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--remove_eos=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to remove &lt;/S&gt; symbol on output.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--heuristics=</span></kbd></td>
<td>Comma-separated list of heuristics to use in heuristic based search like A*.

* &#8216;predictor&#8217;: Predictor specific heuristics. Some predictors come with own heuristics - e.g. the fst predictor uses the shortest path to the final state. Using &#8216;predictor&#8217; combines the specific heuristics of all selected predictors.
* &#8216;greedy&#8217;: Do greedy decoding to get the heuristic costs. This is expensive but accurate.
* &#8216;scoreperword&#8217;: Using this heuristic normalizes the previously accumulated costs by its length. It can be used for beam search with normalized scores, using a capacity (&#8211;beam), no other heuristic, and setting&#8211;decoder to astar.

Note that all heuristics are inadmissible, i.e. A* is not guaranteed to find the globally best path.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--heuristic_predictors=all</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Comma separated list of indices of predictors considered by the heuristic. For example, if &#8211;predictors is set to nmt,length,fst then setting &#8211;heuristic_predictors to 0,2 results in using nmt and fst in the heuristics. Use &#8216;all&#8217; to use all predictors in the heuristics</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--cache_heuristic_estimates=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to cache heuristic future cost estimates. This is especially useful with the greedy heuristic.</td></tr>
</tbody>
</table>
</dd>
<dt>General predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--predictors=nmt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Comma separated list of predictors. Predictors are scoring modules which define a distribution over target words given the history and some side information like the source sentence. If vocabulary sizes differ among predictors, we fill in gaps with predictor UNK scores.:

* &#8216;nmt&#8217;: neural machine translation predictor.
         Options: see machine_translation.configurations plus proto, nmt_model_selector, cache_nmt_posteriors.
* &#8216;srilm&#8217;: n-gram language model.
          Options: srilm_path, srilm_order
* &#8216;nplm&#8217;: neural n-gram language model (NPLM).
          Options: nplm_path, normalize_nplm_probs
* &#8216;forced&#8217;: Forced decoding with one reference
            Options: trg_test
* &#8216;forcedlst&#8217;: Forced decoding with a Moses n-best list (n-best list rescoring)
               Options: trg_test, forcedlst_sparse_feat, use_nbest_weights
* &#8216;fst&#8217;: Deterministic translation lattices
         Options: fst_path, use_fst_weights, normalize_fst_weights, fst_to_log, add_fst_bos_to_eos_weight
* &#8216;nfst&#8217;: Non-deterministic translation lattices
          Options: fst_path, use_fst_weights, normalize_fst_weights, fst_to_log, add_fst_bos_to_eos_weight
* &#8216;rtn&#8217;: Recurrent transition networks as created by HiFST with late expansion.
         Options: rtn_path, use_rtn_weights, minimize_rtns, remove_epsilon_in_rtns, normalize_rtn_weights
* &#8216;lrhiero&#8217;: Direct Hiero (left-to-right Hiero). This is a EXPERIMENTAL implementation of LRHiero.
             Options: rules_path, grammar_feature_weights, use_grammar_weights
* &#8216;wc&#8217;: Number of words feature.
        Options: no options.
* &#8216;length&#8217;: Target sentence length model
            Options: src_test_raw, length_model_weights, use_length_point_probs
All predictors can be combined with one or more wrapper predictors by adding the wrapper name separated by a _ symbol. Following wrappers are available:
* &#8216;idxmap&#8217;: Add this wrapper to predictors which use an alternative word map.            Options: src_idxmap, trg_idxmap

Note that you can use multiple instances of the same predictor. For example, &#8216;nmt,nmt,nmt&#8217; can be used for ensembling three NMT systems. You can often override parts of the predictor configurations for subsequent predictors by adding the predictor number (e.g. see &#8211;nmt_config2 or &#8211;fst_path2)</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--predictor_weights=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Predictor weights. Have to be specified consistently with &#8211;predictor, e.g. if &#8211;predictor is &#8216;bla_fst,nmt&#8217; then set their weights with &#8211;predictor_weights bla-weight_fst-weight,nmt-weight, e.g. &#8216;&#8211;predictor_weights 0.1_0.3,0.6&#8217;. Default (empty string) means that each predictor gets assigned the weight 1.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--closed_vocabulary_normalization=none</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">This parameter specifies the way closed vocabulary predictors (e.g. NMT) are normalized. Closed vocabulary means that they have a predefined vocabulary. Open vocabulary predictors (e.g. fst) can potentially produce any word, or have a very large vocabulary.

* &#8216;none&#8217;: Use unmodified scores for closed vocabulary predictors
* &#8216;exact&#8217;: Renormalize scores depending on the probability mass which they distribute to words outside the vocabulary via the UNK probability.
* &#8216;reduced&#8217;: Normalize to vocabulary defined by the open vocabulary predictors at each time step.</p>
<p class="last">Possible choices: none, exact, reduced</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--combination_scheme=sum</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">This parameter controls how the combined hypothesis score is calculated from the predictor scores and weights.

* &#8216;sum&#8217;: The combined score is the weighted sum of all predictor scores
* &#8216;length_norm&#8217;: Renormalize scores by the length of hypotheses.
* &#8216;bayesian&#8217;: Apply the Bayesian LM interpolation scheme from Allauzen and Riley to interpolate the predictor scores</p>
<p class="last">Possible choices: sum, length_norm, bayesian</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--apply_combination_scheme_to_partial_hypos=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If true, apply the combination scheme specified with &#8211;combination_scheme after each node expansion. If false, apply it only to complete hypotheses at the end of decoding</td></tr>
</tbody>
</table>
</dd>
<dt>Neural predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--proto=get_config_gnmt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Prototype configuration of the NMT model. See cam.sgnmt.blocks.machine_translation.configuration for available prototypes. However, it is recommended to configure GNMT via command line arguments and configuration files instead of using this option.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--length_normalization=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>DEPRECATED. Synonym for &#8211;combination_scheme length_norm. Normalize n-best hypotheses by sentence length. Normally improves pure NMT decoding, but degrades performance when combined with predictors like fst or multiple NMT systems.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--nmt_model_selector=bleu</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">NMT training normally creates several files in the ./train/ directory from which we can load the NMT model. Possible options:

* &#8216;params&#8217;: Load parameters from params.npz. This is usually the most recent model.
* &#8216;bleu&#8217;: Load from the best_bleu_params_* file with the best BLEU score.
* &#8216;time&#8217;: Load from the most recent best_bleu_params_* file.</p>
<p class="last">Possible choices: params, bleu, time</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--cache_nmt_posteriors=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This enables the cache in the [F]NMT predictor. Normally, the search procedure is responsible to avoid applying predictors to the same history twice. However, due to the limited NMT vocabulary, two different histories might be the same from the NMT perspective, e.g. if they are the same up to words which are outside the NMT vocabulary. If this parameter is set to true, we cache posteriors with histories containing UNK and reload them when needed</td></tr>
</tbody>
</table>
</dd>
<dt>Length predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_test_raw=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for the &#8216;length&#8217; predictor. Path to original source test set WITHOUT word indices. This is used to extract features for target sentence length predictions</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--length_model_weights=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for length predictor. String of length model parameters.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--use_length_point_probs=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If this is true, the length predictor outputs probability 1 for all tokens except &lt;/S&gt;. For &lt;/S&gt; it uses the point probability given by the length model. If this is set to false, we normalize the predictive score by comparing P(l=x) and P(l&lt;x)</td></tr>
</tbody>
</table>
</dd>
<dt>Forced decoding predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_test=test_fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to target test set (with integer tokens). This is only required for the predictors &#8216;forced&#8217; and &#8216;forcedlst&#8217;. For &#8216;forcedlst&#8217; this needs to point to an n-best list in Moses format.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fr_test=</span></kbd></td>
<td>DEPRECATED. Old name for &#8211;trg_test</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Per default, the forcedlst predictor uses the combined score in the Moses nbest list. Alternatively, for nbest lists in sparse feature format, you can specify the name of the features which should be used instead.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--use_nbest_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for forcedlst predictor. Whether to use the scores in n-best lists.</td></tr>
</tbody>
</table>
</dd>
<dt>Indexmap predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_idxmap=idxmap.en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for idxmap wrapper predictor. Path to the source side mapping file. The format is &#8216;&lt;index&gt; &lt;alternative_index&gt;&#8217;. The mapping must be complete and should be a bijection.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--en_idxmap=</span></kbd></td>
<td>DEPRECATED. Old name for &#8211;src_idxmap</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_idxmap=idxmap.fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for idxmap wrapper predictor. Path to the target side mapping file. The format is &#8216;&lt;index&gt; &lt;alternative_index&gt;&#8217;. The mapping must be complete and should be a bijection.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fr_idxmap=</span></kbd></td>
<td>DEPRECATED. Old name for &#8211;trg_idxmap</td></tr>
</tbody>
</table>
</dd>
<dt>Hiero predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--rules_path=rules/rules</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for predictor lrhiero. Path to the ruleXtract rules file.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--use_grammar_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to use weights in the synchronous grammar for the lrhiero predictor. If set to false, use uniform grammar scores.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--grammar_feature_weights=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If rules_path points to a factorized rules file (i.e. containing rules associated with a number of features, not only one score) GNMT uses a weighted sum for them. You can specify the weights for this summation here (comma-separated) or leave it blank to sum them up equally weighted.</td></tr>
</tbody>
</table>
</dd>
<dt>Neural LM predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--srilm_path=lm/ngram.lm.gz</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to the ngram LM file in SRILM format</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--nplm_path=nplm/nplm.gz</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Path to the NPLM language model</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--srilm_order=5</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Order of ngram for srilm predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--normalize_nplm_probs=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to normalize nplm probabilities over the current unbounded predictor vocabulary.</td></tr>
</tbody>
</table>
</dd>
<dt>FST and RTN predictor options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fst_path=fst/%d.fst</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for fst and nfst predictor. Sets the path to the OpenFST translation lattices. You can use the placeholder %%d for the sentence index.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--rtn_path=rtn/</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Only required for rtn predictor. Sets the path to the RTN directory as created by HiFST</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--add_fst_bos_to_eos_weight=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This option applies to fst, nfst and rtn predictors. Lattices produced by HiFST contain the &lt;S&gt; symbol and often have scores on the corresponding arc. However, GNMT skips &lt;S&gt; and this score is not regarded anywhere. Set this option to true to add the &lt;S&gt; score to the &lt;/S&gt; arc. This ensures that the complete path scores for the [n]fst and rtn predictors match the corresponding path weights in the original FST as obtained with fstshortestpath.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fst_to_log=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Multiply weights in the FST by -1 to transform them from tropical semiring into logprobs.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--use_fst_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to use weights in FSTs for thenfst and fst predictor.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--use_rtn_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to use weights in RTNs.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--minimize_rtns=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to do determinization, epsilon removal, and minimization after each RTN expansion.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--remove_epsilon_in_rtns=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to remove epsilons after RTN expansion.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--normalize_fst_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to normalize weights in FSTs. This forces the weights on outgoing edges to sum up to 1. Applicable to fst and nfst predictor.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--normalize_rtn_weights=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Whether to normalize weights in RTNs. This forces the weights on outgoing edges to sum up to 1. Applicable to rtn predictor.</td></tr>
</tbody>
</table>
</dd>
<dt>Override options</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--nmt_config2=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the second one with this parameter. The second nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config2 &#8216;save_to=train2,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap2=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the second indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap2=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the second indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path2=</span></kbd></td>
<td>Overrides &#8211;fst_path for the second fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat2=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the second forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config3=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the third one with this parameter. The third nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config3 &#8216;save_to=train3,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap3=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the third indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap3=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the third indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path3=</span></kbd></td>
<td>Overrides &#8211;fst_path for the third fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat3=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the third forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config4=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 4-th one with this parameter. The 4-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config4 &#8216;save_to=train4,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap4=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 4-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap4=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 4-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path4=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 4-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat4=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 4-th forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config5=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 5-th one with this parameter. The 5-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config5 &#8216;save_to=train5,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap5=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 5-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap5=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 5-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path5=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 5-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat5=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 5-th forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config6=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 6-th one with this parameter. The 6-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config6 &#8216;save_to=train6,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap6=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 6-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap6=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 6-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path6=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 6-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat6=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 6-th forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config7=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 7-th one with this parameter. The 7-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config7 &#8216;save_to=train7,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap7=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 7-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap7=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 7-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path7=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 7-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat7=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 7-th forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config8=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 8-th one with this parameter. The 8-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config8 &#8216;save_to=train8,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap8=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 8-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap8=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 8-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path8=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 8-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat8=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 8-th forcedlst predictor</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--nmt_config9=</span></kbd></td>
<td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 9-th one with this parameter. The 9-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config9 &#8216;save_to=train9,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--src_idxmap9=</span></kbd></td>
<td>Overrides &#8211;src_idxmap for the 9-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--trg_idxmap9=</span></kbd></td>
<td>Overrides &#8211;trg_idxmap for the 9-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path9=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 9-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat9=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 9-th forcedlst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--nmt_config10=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 10-th one with this parameter. The 10-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config10 &#8216;save_to=train10,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_idxmap10=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;src_idxmap for the 10-th indexmap</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_idxmap10=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;trg_idxmap for the 10-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path10=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 10-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat10=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 10-th forcedlst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--nmt_config11=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 11-th one with this parameter. The 11-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config11 &#8216;save_to=train11,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_idxmap11=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;src_idxmap for the 11-th indexmap</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_idxmap11=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;trg_idxmap for the 11-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path11=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 11-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat11=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 11-th forcedlst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--nmt_config12=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If the &#8211;predictors string contains more than one nmt predictor, you can specify the configuration for the 12-th one with this parameter. The 12-th nmt predictor inherits all settings under &#8216;Neural model configuration&#8217; except for the ones in this parameter. Usage: &#8211;nmt_config12 &#8216;save_to=train12,enc_embed=400&#8217;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_idxmap12=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;src_idxmap for the 12-th indexmap</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_idxmap12=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;trg_idxmap for the 12-th indexmap</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--fst_path12=</span></kbd></td>
<td>Overrides &#8211;fst_path for the 12-th fst predictor</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--forcedlst_sparse_feat12=</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Overrides &#8211;forcedlst_sparse_feat for the 12-th forcedlst predictor</td></tr>
</tbody>
</table>
</dd>
<dt>Neural model configuration</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--enc_nhids=1000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Number of hidden units in encoder GRU</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--stream=stream</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Module name of the stream that will be used</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--store_full_main_loop=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Old style archives (not recommended)</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_scale=0.01</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Std of weight initialization</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--eos_token=_EOS</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for &lt;/S&gt;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sort_k_batches=12</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This many batches will be read ahead and sorted</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set=./data/dev.ids.en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation set source file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_noise_rec=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Weight noise flag for recurrent layers</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_vocab_size=30003</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Source vocab size, including special tokens</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--save_freq=500</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Save model after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fix_embeddings=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Fix embeddings during training</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set_out=./train/validation_out.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation output file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--enc_embed=620</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Dimension of the word embedding matrix in encoder</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dec_nhids=1000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Number of hidden units in decoder GRU</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--finish_after=1000000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Maximum number of updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--unk_token=_UNK</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for UNK</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--saveto=./train</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Where to save model, same as &#8216;prefix&#8217; in groundhog</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_data=./data/train.ids.shuf.fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Target dataset</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--step_clipping=1.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Gradient clipping threshold</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--dropout=1.0</span></kbd></td>
<td>Dropout ratio, applied only after readout maxout</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--unk_id=0</span></kbd></td>
<td>UNK id</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_burn_in=80000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Start bleu validation after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--step_rule=AdaDelta</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Optimization step rule</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_vocab_size=30003</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Target vocab size, including special tokens</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--batch_size=80</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Batch size</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bleu_val_freq=5000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validate bleu after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--output_val_set=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Print validation output to file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_noise_ff=0.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Weight noise flag for feed forward layers</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_data=./data/train.ids.shuf.en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Source dataset</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set_grndtruth=./data/dev.ids.fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation set gold file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--hook_samples=2</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Show this many samples at each sampling</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bos_token=_GO</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for &lt;S&gt;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sampling_freq=13</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Show samples from model after this many updates</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--reload=True</span></kbd></td>
<td>Reload model from files if exist</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--beam_size=12</span></kbd></td>
<td>Beam-size for decoding DURING TRAINING</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dec_embed=620</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Dimension of the word embedding matrix in decoder</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bleu_script=perl ../scripts/multi-bleu.perl %s &lt;</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>BLEU script used during training for model selection</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--seq_len=50</span></kbd></td>
<td>Sequences longer than this will be discarded</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--normalized_bleu=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Length normalization IN TRAINING</td></tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="training">
<h2>Training<a class="headerlink" href="#training" title="Permalink to this headline">¶</a></h2>
<p>The training script follows the NMT training example in blocks, but it adds an
option for enabling reshuffling the training data between epochs, and fixing
word embedding which might be used in later training stages.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">train</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">proto</span> <span class="n">PROTO</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">bokeh</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">reshuffle</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">enc_nhids</span> <span class="n">ENC_NHIDS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">stream</span> <span class="n">STREAM</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">store_full_main_loop</span> <span class="n">STORE_FULL_MAIN_LOOP</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">weight_scale</span> <span class="n">WEIGHT_SCALE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">eos_token</span> <span class="n">EOS_TOKEN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">sort_k_batches</span> <span class="n">SORT_K_BATCHES</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_set</span> <span class="n">VAL_SET</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">weight_noise_rec</span> <span class="n">WEIGHT_NOISE_REC</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">src_vocab_size</span> <span class="n">SRC_VOCAB_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">save_freq</span> <span class="n">SAVE_FREQ</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">fix_embeddings</span> <span class="n">FIX_EMBEDDINGS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_set_out</span> <span class="n">VAL_SET_OUT</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">enc_embed</span> <span class="n">ENC_EMBED</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dec_nhids</span> <span class="n">DEC_NHIDS</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">finish_after</span> <span class="n">FINISH_AFTER</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">unk_token</span> <span class="n">UNK_TOKEN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">saveto</span> <span class="n">SAVETO</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trg_data</span> <span class="n">TRG_DATA</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">step_clipping</span> <span class="n">STEP_CLIPPING</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dropout</span> <span class="n">DROPOUT</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">unk_id</span> <span class="n">UNK_ID</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">val_burn_in</span> <span class="n">VAL_BURN_IN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">step_rule</span> <span class="n">STEP_RULE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">trg_vocab_size</span> <span class="n">TRG_VOCAB_SIZE</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">batch_size</span> <span class="n">BATCH_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">bleu_val_freq</span> <span class="n">BLEU_VAL_FREQ</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">output_val_set</span> <span class="n">OUTPUT_VAL_SET</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">weight_noise_ff</span> <span class="n">WEIGHT_NOISE_FF</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">src_data</span> <span class="n">SRC_DATA</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">val_set_grndtruth</span> <span class="n">VAL_SET_GRNDTRUTH</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">hook_samples</span> <span class="n">HOOK_SAMPLES</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">bos_token</span> <span class="n">BOS_TOKEN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">sampling_freq</span> <span class="n">SAMPLING_FREQ</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">reload</span> <span class="n">RELOAD</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">beam_size</span> <span class="n">BEAM_SIZE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">dec_embed</span> <span class="n">DEC_EMBED</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">bleu_script</span> <span class="n">BLEU_SCRIPT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">seq_len</span> <span class="n">SEQ_LEN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">normalized_bleu</span> <span class="n">NORMALIZED_BLEU</span><span class="p">]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>optional arguments</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--proto=get_config_gnmt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Prototype config to use for config</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--bokeh=False</span></kbd></td>
<td>Use bokeh server for plotting</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--reshuffle=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Reshuffle before each epoch</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--enc_nhids=1000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Number of hidden units in encoder GRU</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--stream=stream</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Module name of the stream that will be used</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--store_full_main_loop=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Old style archives (not recommended)</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_scale=0.01</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Std of weight initialization</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--eos_token=_EOS</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for &lt;/S&gt;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sort_k_batches=12</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This many batches will be read ahead and sorted</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set=./data/dev.ids.en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation set source file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_noise_rec=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Weight noise flag for recurrent layers</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_vocab_size=30003</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Source vocab size, including special tokens</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--save_freq=500</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Save model after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--fix_embeddings=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Fix embeddings during training</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set_out=./train/validation_out.txt</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation output file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--enc_embed=620</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Dimension of the word embedding matrix in encoder</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dec_nhids=1000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Number of hidden units in decoder GRU</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--finish_after=1000000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Maximum number of updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--unk_token=_UNK</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for UNK</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--saveto=./train</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Where to save model, same as &#8216;prefix&#8217; in groundhog</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_data=./data/train.ids.shuf.fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Target dataset</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--step_clipping=1.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Gradient clipping threshold</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--dropout=1.0</span></kbd></td>
<td>Dropout ratio, applied only after readout maxout</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--unk_id=0</span></kbd></td>
<td>UNK id</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_burn_in=80000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Start bleu validation after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--step_rule=AdaDelta</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Optimization step rule</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--trg_vocab_size=30003</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Target vocab size, including special tokens</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--batch_size=80</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Batch size</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bleu_val_freq=5000</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validate bleu after this many updates</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--output_val_set=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Print validation output to file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--weight_noise_ff=0.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Weight noise flag for feed forward layers</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--src_data=./data/train.ids.shuf.en</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Source dataset</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--val_set_grndtruth=./data/dev.ids.fr</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Validation set gold file</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--hook_samples=2</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Show this many samples at each sampling</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bos_token=_GO</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>String representation for &lt;S&gt;</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--sampling_freq=13</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Show samples from model after this many updates</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--reload=True</span></kbd></td>
<td>Reload model from files if exist</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--beam_size=12</span></kbd></td>
<td>Beam-size for decoding DURING TRAINING</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dec_embed=620</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Dimension of the word embedding matrix in decoder</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bleu_script=perl ../scripts/multi-bleu.perl %s &lt;</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>BLEU script used during training for model selection</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--seq_len=50</span></kbd></td>
<td>Sequences longer than this will be discarded</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--normalized_bleu=True</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Length normalization IN TRAINING</td></tr>
</tbody>
</table>
</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="predictors.html" class="btn btn-neutral float-right" title="Predictors" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial.html" class="btn btn-neutral" title="Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, University of Cambridge.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>